<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Chester Ismay">

<title>Exploratory Data Analysis in R with the tidyverse</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-6bd9cfa162949bde0a231f530c97869d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Exploratory Data Analysis in R with the tidyverse with Dr.&nbsp;Chester Ismay</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../walkthroughs.html"> 
<span class="menu-text">Walkthroughs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../slides.html"> 
<span class="menu-text">Slides</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#day-1-exploring-cleaning-and-organizing-data" id="toc-day-1-exploring-cleaning-and-organizing-data" class="nav-link active" data-scroll-target="#day-1-exploring-cleaning-and-organizing-data">Day 1: Exploring, Cleaning, and Organizing Data</a>
  <ul class="collapse">
  <li><a href="#session-1-foundations-of-eda-in-r-with-the-tidyverse" id="toc-session-1-foundations-of-eda-in-r-with-the-tidyverse" class="nav-link" data-scroll-target="#session-1-foundations-of-eda-in-r-with-the-tidyverse">Session 1: Foundations of EDA in R with the tidyverse</a>
  <ul class="collapse">
  <li><a href="#installing-the-necessary-packages" id="toc-installing-the-necessary-packages" class="nav-link" data-scroll-target="#installing-the-necessary-packages">1: Installing the necessary packages</a></li>
  <li><a href="#loading-the-packages-and-data" id="toc-loading-the-packages-and-data" class="nav-link" data-scroll-target="#loading-the-packages-and-data">2. Loading the packages and data</a></li>
  <li><a href="#viewing-the-data" id="toc-viewing-the-data" class="nav-link" data-scroll-target="#viewing-the-data">3. Viewing the data</a></li>
  <li><a href="#remove-songs-listed-multiple-times-in-the-data" id="toc-remove-songs-listed-multiple-times-in-the-data" class="nav-link" data-scroll-target="#remove-songs-listed-multiple-times-in-the-data">4. Remove songs listed multiple times in the data</a></li>
  <li><a href="#take-a-random-sample-of-the-data" id="toc-take-a-random-sample-of-the-data" class="nav-link" data-scroll-target="#take-a-random-sample-of-the-data">5. Take a random sample of the data</a></li>
  <li><a href="#spot-checking-unique-genres" id="toc-spot-checking-unique-genres" class="nav-link" data-scroll-target="#spot-checking-unique-genres">6. Spot-checking unique genres</a></li>
  <li><a href="#checking-for-missing-values" id="toc-checking-for-missing-values" class="nav-link" data-scroll-target="#checking-for-missing-values">7. Checking for missing values</a></li>
  <li><a href="#identifying-numeric-vs-categorical-variables" id="toc-identifying-numeric-vs-categorical-variables" class="nav-link" data-scroll-target="#identifying-numeric-vs-categorical-variables">8. Identifying numeric vs categorical variables</a></li>
  <li><a href="#creating-summary-tables" id="toc-creating-summary-tables" class="nav-link" data-scroll-target="#creating-summary-tables">9. Creating summary tables</a></li>
  <li><a href="#quick-plot-of-distribution" id="toc-quick-plot-of-distribution" class="nav-link" data-scroll-target="#quick-plot-of-distribution">10. Quick plot of distribution</a></li>
  <li><a href="#session-1-review-questions" id="toc-session-1-review-questions" class="nav-link" data-scroll-target="#session-1-review-questions">Session 1 Review Questions</a></li>
  <li><a href="#session-1-review-question-answers" id="toc-session-1-review-question-answers" class="nav-link" data-scroll-target="#session-1-review-question-answers">Session 1 Review Question Answers</a></li>
  </ul></li>
  <li><a href="#session-2-data-cleaning-fundamentals-with-dplyr-tidyr-and-janitor" id="toc-session-2-data-cleaning-fundamentals-with-dplyr-tidyr-and-janitor" class="nav-link" data-scroll-target="#session-2-data-cleaning-fundamentals-with-dplyr-tidyr-and-janitor">Session 2: Data Cleaning Fundamentals with <code>dplyr</code>, <code>tidyr</code>, and <code>janitor</code></a>
  <ul class="collapse">
  <li><a href="#filtering-and-selecting-columns" id="toc-filtering-and-selecting-columns" class="nav-link" data-scroll-target="#filtering-and-selecting-columns">11. Filtering and selecting columns</a></li>
  <li><a href="#creating-conditional-flags" id="toc-creating-conditional-flags" class="nav-link" data-scroll-target="#creating-conditional-flags">12. Creating conditional flags</a></li>
  <li><a href="#creating-new-columns-with-mutate" id="toc-creating-new-columns-with-mutate" class="nav-link" data-scroll-target="#creating-new-columns-with-mutate">13. Creating new columns with <code>mutate()</code></a></li>
  <li><a href="#grouping-and-summarizing" id="toc-grouping-and-summarizing" class="nav-link" data-scroll-target="#grouping-and-summarizing">14. Grouping and summarizing</a></li>
  <li><a href="#wide-to-long-with-tidyrpivot_longer" id="toc-wide-to-long-with-tidyrpivot_longer" class="nav-link" data-scroll-target="#wide-to-long-with-tidyrpivot_longer">15. Wide to long with <code>tidyr::pivot_longer()</code></a></li>
  <li><a href="#long-to-wide-with-tidyrpivot_wider" id="toc-long-to-wide-with-tidyrpivot_wider" class="nav-link" data-scroll-target="#long-to-wide-with-tidyrpivot_wider">16. Long to wide with <code>tidyr::pivot_wider()</code></a></li>
  <li><a href="#splitting-a-column-into-multiple-parts-with-tidyrseparate" id="toc-splitting-a-column-into-multiple-parts-with-tidyrseparate" class="nav-link" data-scroll-target="#splitting-a-column-into-multiple-parts-with-tidyrseparate">17. Splitting a column into multiple parts with <code>tidyr::separate()</code></a></li>
  <li><a href="#uniting-columns" id="toc-uniting-columns" class="nav-link" data-scroll-target="#uniting-columns">18. Uniting columns</a></li>
  <li><a href="#cleaning-up-with-janitor" id="toc-cleaning-up-with-janitor" class="nav-link" data-scroll-target="#cleaning-up-with-janitor">19. Cleaning up with <code>janitor</code></a></li>
  <li><a href="#reordering-and-recoding-variables" id="toc-reordering-and-recoding-variables" class="nav-link" data-scroll-target="#reordering-and-recoding-variables">20. Reordering and recoding variables</a></li>
  <li><a href="#session-2-review-questions" id="toc-session-2-review-questions" class="nav-link" data-scroll-target="#session-2-review-questions">Session 2 Review Questions</a></li>
  <li><a href="#session-2-review-question-answers" id="toc-session-2-review-question-answers" class="nav-link" data-scroll-target="#session-2-review-question-answers">Session 2 Review Question Answers</a></li>
  </ul></li>
  <li><a href="#session-3-managing-dates-strings-and-categories" id="toc-session-3-managing-dates-strings-and-categories" class="nav-link" data-scroll-target="#session-3-managing-dates-strings-and-categories">Session 3: Managing Dates, Strings, and Categories</a>
  <ul class="collapse">
  <li><a href="#working-with-strings-using-stringr" id="toc-working-with-strings-using-stringr" class="nav-link" data-scroll-target="#working-with-strings-using-stringr">21. Working with strings using <code>stringr</code></a></li>
  <li><a href="#extracting-and-replacing-substrings" id="toc-extracting-and-replacing-substrings" class="nav-link" data-scroll-target="#extracting-and-replacing-substrings">22. Extracting and replacing substrings</a></li>
  <li><a href="#wrangling-artists-into-long-format" id="toc-wrangling-artists-into-long-format" class="nav-link" data-scroll-target="#wrangling-artists-into-long-format">23. Wrangling artists into long format</a></li>
  <li><a href="#cleaning-and-recoding-categories" id="toc-cleaning-and-recoding-categories" class="nav-link" data-scroll-target="#cleaning-and-recoding-categories">24. Cleaning and recoding categories</a></li>
  <li><a href="#counting-words-in-track-names" id="toc-counting-words-in-track-names" class="nav-link" data-scroll-target="#counting-words-in-track-names">25. Counting words in track names</a></li>
  <li><a href="#checking-for-artists-appearing-in-multiple-genres" id="toc-checking-for-artists-appearing-in-multiple-genres" class="nav-link" data-scroll-target="#checking-for-artists-appearing-in-multiple-genres">26. Checking for artists appearing in multiple genres</a></li>
  <li><a href="#parsing-dates-with-lubridate-and-azflights24" id="toc-parsing-dates-with-lubridate-and-azflights24" class="nav-link" data-scroll-target="#parsing-dates-with-lubridate-and-azflights24">27. Parsing dates with <code>lubridate</code> and <code>azflights24</code></a></li>
  <li><a href="#reordering-factors-for-better-visualizations-with-forcats-and-ggplot2" id="toc-reordering-factors-for-better-visualizations-with-forcats-and-ggplot2" class="nav-link" data-scroll-target="#reordering-factors-for-better-visualizations-with-forcats-and-ggplot2">28. Reordering factors for better visualizations with <code>forcats</code> and <code>ggplot2</code></a></li>
  <li><a href="#interactive-line-plot-of-6-hour-wind-speed-averages" id="toc-interactive-line-plot-of-6-hour-wind-speed-averages" class="nav-link" data-scroll-target="#interactive-line-plot-of-6-hour-wind-speed-averages">29. Interactive line plot of 6-hour wind speed averages</a></li>
  <li><a href="#summarizing-weather-app-preferences-by-region" id="toc-summarizing-weather-app-preferences-by-region" class="nav-link" data-scroll-target="#summarizing-weather-app-preferences-by-region">30. Summarizing weather app preferences by region</a></li>
  <li><a href="#session-3-review-questions" id="toc-session-3-review-questions" class="nav-link" data-scroll-target="#session-3-review-questions">Session 3 Review Questions</a></li>
  <li><a href="#session-3-review-question-answers" id="toc-session-3-review-question-answers" class="nav-link" data-scroll-target="#session-3-review-question-answers">Session 3 Review Question Answers</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Exploratory Data Analysis in R with the <code>tidyverse</code></h1>
<p class="subtitle lead">Day 1 Walkthrough Answers</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;Chester Ismay </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="day-1-exploring-cleaning-and-organizing-data" class="level1">
<h1>Day 1: Exploring, Cleaning, and Organizing Data</h1>
<section id="session-1-foundations-of-eda-in-r-with-the-tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="session-1-foundations-of-eda-in-r-with-the-tidyverse">Session 1: Foundations of EDA in R with the tidyverse</h2>
<section id="installing-the-necessary-packages" class="level3">
<h3 class="anchored" data-anchor-id="installing-the-necessary-packages">1: Installing the necessary packages</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a vector of package names needed for this course</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"moderndive"</span>,          <span class="co"># For tidyverse-based data analysis tools and datasets</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"fivethirtyeight"</span>,     <span class="co"># Contains curated datasets from FiveThirtyEight.com</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"knitr"</span>,               <span class="co"># For formatting outputs and rendering R Markdown documents</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"janitor"</span>,             <span class="co"># For cleaning data and column names easily</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"plotly"</span>,              <span class="co"># For creating interactive visualizations</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dplyr"</span>,               <span class="co"># For data wrangling: filter(), mutate(), summarize(), etc.</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ggplot2"</span>,             <span class="co"># For static data visualizations using the grammar of graphics</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tidyr"</span>,               <span class="co"># For tidying and reshaping data</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"stringr"</span>,             <span class="co"># For working with strings using consistent functions</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"forcats"</span>,             <span class="co"># For working with factors (especially useful with categorical variables)</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"lubridate"</span>,           <span class="co"># For working with date and time data</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"purrr"</span>)               <span class="co"># For functional programming tools to iterate and map over data</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Install all the packages listed above from CRAN using a reliable mirror</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(packages, <span class="at">repos =</span> <span class="st">"https://cran.rstudio.com"</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternative: You could install a bundled version of these packages using the tidyverse meta-package</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co"># packages_revised &lt;- c(</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co">#   "moderndive", "fivethirtyeight", "knitr", "janitor", "plotly", </span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co">#   "tidyverse")  # This includes ggplot2, dplyr, tidyr, stringr, forcats, purrr, etc.</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(packages_revised, repos = "https://cran.rstudio.com")</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Install the azflights24 package from GitHub (not available on CRAN)</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"remotes"</span>)  <span class="co"># Make sure the remotes package is available</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"moderndive/azflights24"</span>)  <span class="co"># Install from GitHub directly</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We’re going to begin by installing the packages we’ll use throughout this course. This is a one-time setup step for each R environment you use.</p>
<p>First, we define a list of packages we need. These cover everything from data wrangling (<code>dplyr</code>, <code>tidyr</code>) and visualization (<code>ggplot2</code>, <code>plotly</code>) to text (<code>stringr</code>), dates (<code>lubridate</code>), and even functional programming (<code>purrr</code>). The <code>janitor</code> package is great for cleaning column names and tabulating summaries, while <code>moderndive</code> and <code>fivethirtyeight</code> provide datasets and helper functions.</p>
<p>You’ll notice I also included <code>knitr</code> for report generation, which comes in handy when you’re knitting R Markdown documents. We install all these from CRAN using <code>install.packages()</code> and specify a mirror with <code>repos</code>.</p>
<p>As an alternative, I’ve commented out a version that just uses <code>tidyverse</code>, which installs a bundle of these tools in one go—but I like being explicit so you see exactly what we’re using.</p>
<p>Finally, we’re installing a package called <code>azflights24</code> that isn’t on CRAN—it’s hosted on GitHub instead. To install it, we first need the <code>remotes</code> package, and then we use <code>remotes::install_github()</code> to fetch and install it directly. This package will give us some fun real-world flight data for our analysis later in the course.</p>
<p>Let’s move on once everything is installed!</p>
</section>
<section id="loading-the-packages-and-data" class="level3">
<h3 class="anchored" data-anchor-id="loading-the-packages-and-data">2. Loading the packages and data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages we will need</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(moderndive)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I'll try to be explicit with using :: as we get started though so</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># you know which package includes the function used.</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the spotify_by_genre dataset from the moderndive package</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"spotify_by_genre"</span>, <span class="at">package =</span> <span class="st">"moderndive"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We’re starting off by loading the <code>tidyverse</code> package. This is a collection of packages that work really well together for data analysis. It includes tools like <code>dplyr</code> for manipulating data, <code>ggplot2</code> for making plots, and <code>tibble</code> for nicely formatted data frames. It also loads <code>readr</code> for reading in data, <code>stringr</code> for string operations, and <code>forcats</code> for working with categorical variables.</p>
<p>Then, we load the <code>spotify_by_genre</code> dataset from the <code>moderndive</code> package. This dataset contains information on thousands of Spotify tracks across six music genres, and we’ll use it for most of our EDA walkthroughs. It’s a great real-world example that blends numbers, categories, and even text.</p>
<section id="dataset-overview-spotify_by_genre" class="level4">
<h4 class="anchored" data-anchor-id="dataset-overview-spotify_by_genre">Dataset Overview: <code>spotify_by_genre</code></h4>
<p>This dataset contains information on <strong>6,000 Spotify tracks</strong>, each categorized into one of <strong>six genres</strong>: country, deep-house, dubstep, hip-hop, metal, and rock. It combines <strong>audio feature metrics</strong>, <strong>track metadata</strong>, and a <strong>popularity indicator</strong>, offering a rich foundation for analyzing music trends, exploring genre-specific characteristics, and building predictive models for track popularity.</p>
</section>
<section id="key-features" class="level4">
<h4 class="anchored" data-anchor-id="key-features">Key Features:</h4>
<ul>
<li><strong>21 variables</strong> including:</li>
<li><strong>Metadata</strong>: <code>track_id</code>, <code>artists</code>, <code>album_name</code>, <code>track_name</code>, <code>track_genre</code></li>
<li><strong>Popularity</strong>: <code>popularity</code> (0–100) and a binary label <code>popular_or_not</code> (≥50 considered “popular”)</li>
<li><strong>Audio Features</strong>: <code>danceability</code>, <code>energy</code>, <code>acousticness</code>, <code>valence</code>, etc. (scaled 0–1)</li>
<li><strong>Musical Structure</strong>: <code>tempo</code>, <code>key</code>, <code>mode</code>, <code>time_signature</code></li>
<li><strong>Track Attributes</strong>: <code>explicit</code> (logical), <code>duration_ms</code>, <code>loudness</code>, <code>speechiness</code></li>
</ul>
</section>
<section id="source" class="level4">
<h4 class="anchored" data-anchor-id="source">Source:</h4>
<p>Data was collected using the <a href="https://developer.spotify.com/documentation/web-api/">Spotify Web API</a>, which provides access to comprehensive track-level metadata and audio analysis.</p>
</section>
</section>
<section id="viewing-the-data" class="level3">
<h3 class="anchored" data-anchor-id="viewing-the-data">3. Viewing the data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View the structure of the dataset including variable types and example values</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(spotify_by_genre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6,000
Columns: 21
$ track_id         &lt;chr&gt; "2wrJq5XKLnmhRXHIAf9xBa", "6AHJTA1BN7ePfChCwqph3z", "5eUtyONoPyfZYGrFHmZzlc", "1e3QZ42GsP8cTy5uQ0G7J3", "5Vnx0s7H73V3l6qPWv…
$ artists          &lt;chr&gt; "Dan + Shay;Justin Bieber", "Luke Bryan", "Thomas Rhett", "Zach Bryan", "Zach Bryan", "Zach Bryan", "Zach Bryan", "Zach Bry…
$ album_name       &lt;chr&gt; "10,000 Hours (with Justin Bieber)", "Country USA", "Mientras hago aromaterapia", "New Country", "Easy Country", "Relaxing …
$ track_name       &lt;chr&gt; "10,000 Hours (with Justin Bieber)", "Country On", "Die A Happy Man", "Something in the Orange", "Something in the Orange",…
$ popularity       &lt;dbl&gt; 78, 0, 1, 3, 4, 4, 2, 2, 1, 2, 1, 0, 8, 0, 0, 2, 3, 1, 5, 0, 2, 0, 3, 0, 0, 0, 0, 0, 0, 1, 2, 1, 0, 0, 1, 0, 0, 3, 0, 2, 0,…
$ duration_ms      &lt;dbl&gt; 167693, 236455, 228320, 228013, 228013, 228013, 228013, 228013, 228013, 225560, 228013, 228013, 216764, 228013, 228013, 200…
$ explicit         &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALS…
$ danceability     &lt;dbl&gt; 0.654, 0.520, 0.590, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.644, 0.369, 0.369, 0.464, 0.369, 0.369, 0.493, 0.544, 0.36…
$ energy           &lt;dbl&gt; 0.630, 0.751, 0.389, 0.192, 0.192, 0.192, 0.192, 0.192, 0.192, 0.904, 0.192, 0.192, 0.755, 0.192, 0.192, 0.931, 0.573, 0.19…
$ key              &lt;dbl&gt; 10, 5, 2, 4, 4, 4, 4, 4, 4, 2, 4, 4, 4, 4, 4, 1, 8, 4, 8, 0, 3, 4, 11, 4, 8, 8, 4, 4, 4, 8, 9, 0, 3, 8, 0, 11, 9, 7, 4, 9, …
$ loudness         &lt;dbl&gt; -4.644, -5.064, -9.245, -12.151, -12.151, -12.151, -12.151, -12.151, -12.151, -4.532, -12.151, -12.151, -5.707, -12.151, -1…
$ mode             &lt;dbl&gt; 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, …
$ speechiness      &lt;dbl&gt; 0.0259, 0.0551, 0.0387, 0.0400, 0.0400, 0.0400, 0.0400, 0.0400, 0.0400, 0.0464, 0.0400, 0.0400, 0.0354, 0.0400, 0.0400, 0.0…
$ acousticness     &lt;dbl&gt; 0.15300, 0.17100, 0.41100, 0.55500, 0.55500, 0.55500, 0.55500, 0.55500, 0.55500, 0.02950, 0.55500, 0.55500, 0.00838, 0.5550…
$ instrumentalness &lt;dbl&gt; 0.00e+00, 7.40e-06, 1.48e-06, 8.35e-06, 8.35e-06, 8.35e-06, 8.35e-06, 8.35e-06, 8.35e-06, 0.00e+00, 8.35e-06, 8.35e-06, 0.0…
$ liveness         &lt;dbl&gt; 0.1110, 0.0624, 0.1170, 0.0954, 0.0954, 0.0954, 0.0954, 0.0954, 0.0954, 0.0834, 0.0954, 0.0954, 0.0989, 0.0954, 0.0954, 0.1…
$ valence          &lt;dbl&gt; 0.430, 0.519, 0.389, 0.148, 0.148, 0.148, 0.148, 0.148, 0.148, 0.672, 0.148, 0.148, 0.449, 0.148, 0.148, 0.556, 0.233, 0.14…
$ tempo            &lt;dbl&gt; 89.991, 156.044, 166.055, 175.212, 175.212, 175.212, 175.212, 175.212, 175.212, 105.969, 175.212, 175.212, 155.973, 175.212…
$ time_signature   &lt;dbl&gt; 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 3, 3, 4, 3, 3, 4, 4, 3, 4, 4, 4, 3, 3, 3, 4, 4, 3, 4, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, …
$ track_genre      &lt;chr&gt; "country", "country", "country", "country", "country", "country", "country", "country", "country", "country", "country", "c…
$ popular_or_not   &lt;chr&gt; "popular", "not popular", "not popular", "not popular", "not popular", "not popular", "not popular", "not popular", "not po…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the dataset in a spreadsheet-style viewer (interactive, only works in RStudio)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(spotify_by_genre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We’re using <code>glimpse()</code> here to quickly scan the structure of our dataset. It gives us a sideways (transposed) look at the variables, showing the type of each column—like whether it’s numeric, character, or logical—and a few sample values. This is much faster and more readable than using <code>str()</code> when working with tidy data.</p>
<p>For a more traditional spreadsheet view, you can use <code>View()</code> if you’re in RStudio. It lets you scroll through the data, which is helpful when getting familiar with variable names and spotting patterns or issues early on.</p>
<p>Right away, we can start identifying variables we’ll want to analyze, such as <code>popularity</code>, <code>track_genre</code>, <code>danceability</code>, <code>energy</code>, and <code>explicit</code>. There’s also a <code>popular_or_not</code> column that could be useful for classification-style questions later.</p>
</section>
<section id="remove-songs-listed-multiple-times-in-the-data" class="level3">
<h3 class="anchored" data-anchor-id="remove-songs-listed-multiple-times-in-the-data">4. Remove songs listed multiple times in the data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove duplicate songs based on the track_name column</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># .keep_all = TRUE keeps the first full row for each unique track_name</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>spotify <span class="ot">&lt;-</span> spotify_by_genre <span class="sc">|&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(track_name, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># View the resulting cleaned dataset</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>spotify</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,311 × 21
   track_id            artists album_name track_name popularity duration_ms explicit danceability energy   key loudness  mode speechiness acousticness
   &lt;chr&gt;               &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt;       &lt;dbl&gt; &lt;lgl&gt;           &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
 1 2wrJq5XKLnmhRXHIAf… Dan + … 10,000 Ho… 10,000 Ho…         78      167693 FALSE           0.654  0.63     10    -4.64     1      0.0259      0.153  
 2 6AHJTA1BN7ePfChCwq… Luke B… Country U… Country On          0      236455 FALSE           0.52   0.751     5    -5.06     1      0.0551      0.171  
 3 5eUtyONoPyfZYGrFHm… Thomas… Mientras … Die A Hap…          1      228320 FALSE           0.59   0.389     2    -9.24     1      0.0387      0.411  
 4 1e3QZ42GsP8cTy5uQ0… Zach B… New Count… Something…          3      228013 FALSE           0.369  0.192     4   -12.2      0      0.04        0.555  
 5 43WFp6WBAvNgc7iaFF… Luke B… Tailgate … Country G…          2      225560 FALSE           0.644  0.904     2    -4.53     1      0.0464      0.0295 
 6 16LAkUOZbmqdHgicUs… Thomas… Sad Count… Slow Down…          8      216764 FALSE           0.464  0.755     4    -5.71     1      0.0354      0.00838
 7 6rfDtM5aHbsaLGAUxf… Florid… Sad Count… Stay                2      200426 FALSE           0.493  0.931     1    -2.99     1      0.041       0.0838 
 8 24NRxtqD6oySjRnAZx… Zach B… Country C… Oklahoma …          3      211739 FALSE           0.544  0.573     8    -5.69     1      0.0356      0.0958 
 9 3opqy7HYeNHQaUwYVS… Thomas… Tailgate … Put It On…          0      184800 FALSE           0.554  0.757     0    -4.30     1      0.0355      0.0101 
10 66ERrn57fmkbOq9zhE… Zach B… rainy day… November …          2      243709 FALSE           0.429  0.197     3    -9.80     1      0.032       0.774  
# ℹ 4,301 more rows
# ℹ 7 more variables: instrumentalness &lt;dbl&gt;, liveness &lt;dbl&gt;, valence &lt;dbl&gt;, tempo &lt;dbl&gt;, time_signature &lt;dbl&gt;, track_genre &lt;chr&gt;,
#   popular_or_not &lt;chr&gt;</code></pre>
</div>
</div>
<p>In this step, we’re making sure our analysis isn’t biased by repeated entries of the same song. We use <code>distinct()</code> from <code>dplyr</code> to keep only one row per unique <code>track_name</code>. The <code>.keep_all = TRUE</code> argument tells R to keep all the columns from the first occurrence of each unique song, not just the track name itself.</p>
<p>This helps us avoid over-representing songs that appear more than once in the dataset—possibly due to re-releases, duplicates in the source, or errors in scraping. Now that we have a cleaner dataset, we’re ready to start exploring music features like popularity and genre in a more reliable way.</p>
</section>
<section id="take-a-random-sample-of-the-data" class="level3">
<h3 class="anchored" data-anchor-id="take-a-random-sample-of-the-data">5. Take a random sample of the data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set a random seed so results are reproducible</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2025</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Take a random sample of 10 rows from the full dataset</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 21
   track_id            artists album_name track_name popularity duration_ms explicit danceability energy   key loudness  mode speechiness acousticness
   &lt;chr&gt;               &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt;       &lt;dbl&gt; &lt;lgl&gt;           &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
 1 0HJ7K7uauPS05UqWUk… CALVO;… Let Me Lo… Let Me Lo…         57      160748 FALSE           0.406  0.88      5    -5.56     1      0.0712       0.0183
 2 1G09oEhz0Tye3xnYYF… KDrew;… Prism      Prism              48      165882 FALSE           0.561  0.847     3    -5.03     0      0.0589       0.361 
 3 0DRMigVA7KEsuCXMOl… Hunter… Chillin' … You Shoul…          0      176552 FALSE           0.609  0.66      6    -5.66     1      0.0343       0.123 
 4 2qZBjaOuBM8M883Bj5… ILLENI… Top of th… Story of …          0      240608 FALSE           0.537  0.884     0    -4.09     0      0.0428       0.0121
 5 0HGpVO2aqh9Dadfs90… Faith … Finest Co… Like We N…          0      257693 FALSE           0.494  0.467     2    -8.18     1      0.0286       0.0822
 6 61bUwAYTGluUHZhhlU… Embody  I Miss You I Miss You         48      176000 FALSE           0.702  0.828     0    -3.07     1      0.0312       0.0163
 7 71BwuaJ5VjGx9EJdrc… The Ki… Home For … Don't Sho…          0      245106 FALSE           0.588  0.847     8    -4.16     1      0.0705       0.0601
 8 2VTtxoSgxXQS7NPKSp… WE ARE… DUALITY    Sad Story          41      183111 FALSE           0.499  0.587     7    -5.91     0      0.0438       0.092 
 9 0apCPw4wHWMtW3DPR6… Whales… High       High               47      184258 FALSE           0.616  0.643     6    -5.86     0      0.0648       0.38  
10 20hTmPgYgVWwtVgrSr… Tyler … Bottles a… Silence            42      125413 FALSE           0.502  0.301     7   -12.5      1      0.0315       0.835 
# ℹ 7 more variables: instrumentalness &lt;dbl&gt;, liveness &lt;dbl&gt;, valence &lt;dbl&gt;, tempo &lt;dbl&gt;, time_signature &lt;dbl&gt;, track_genre &lt;chr&gt;,
#   popular_or_not &lt;chr&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Take a random sample of 10 rows but focus only on selected columns</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(track_name, artists, track_genre, popularity) <span class="sc">|&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   track_name                               artists                                            track_genre popularity
   &lt;chr&gt;                                    &lt;chr&gt;                                              &lt;chr&gt;            &lt;dbl&gt;
 1 "Take on Me"                             a-ha                                               rock                85
 2 "Dawood"                                 Sidhu Moose Wala                                   hip-hop             63
 3 "Tere Naal Nachna (From \"Nawabzaade\")" Badshah;Sunanda Sharma                             hip-hop             60
 4 "Paper Thin - Headhunterz Remix"         ILLENIUM;Tom DeLonge;Angels &amp; Airwaves;Headhunterz dubstep             57
 5 "More"                                   Jan Blomqvist;Elena Pitoulis                       deep-house          62
 6 "The Fight Song"                         Marilyn Manson                                     metal                1
 7 "Summertime Sadness"                     Y.V.E. 48                                          deep-house           0
 8 "Dracula"                                King                                               hip-hop             56
 9 "THATS WHAT I WANT"                      Lil Nas X                                          hip-hop             87
10 "No More Sorrow"                         Linkin Park                                        metal               48</code></pre>
</div>
</div>
<p>Sampling a few rows is a great way to get an intuitive sense of what the data looks like. Here, we’re using <code>slice_sample(n = 10)</code> to pull a random set of 10 rows. Setting a seed with <code>set.seed()</code> ensures we get the same sample every time, which is useful when teaching or debugging.</p>
<p>If we only care about certain columns—like song name, artist, genre, and popularity—we can pair <code>slice_sample()</code> with <code>select()</code> to keep things focused. This smaller view helps when sharing examples or discussing specific values in class without being overwhelmed by the full dataset.</p>
</section>
<section id="spot-checking-unique-genres" class="level3">
<h3 class="anchored" data-anchor-id="spot-checking-unique-genres">6. Spot-checking unique genres</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of tracks in each genre and sort from most to least</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(track_genre, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  track_genre     n
  &lt;chr&gt;       &lt;int&gt;
1 deep-house    903
2 dubstep       871
3 metal         775
4 hip-hop       714
5 country       595
6 rock          453</code></pre>
</div>
</div>
<p>This line of code helps us understand how our dataset is distributed across different genres. By using <code>count(track_genre, sort = TRUE)</code>, we’re grouping the data by genre and counting how many tracks fall into each one. The <code>sort = TRUE</code> argument arranges the results from most common to least common.</p>
<p>This kind of summary is super helpful early on. It tells us which genres dominate the dataset and which ones are underrepresented. If we’re doing comparisons later, we might want to keep this distribution in mind to avoid skewed analyses or misleading conclusions.</p>
</section>
<section id="checking-for-missing-values" class="level3">
<h3 class="anchored" data-anchor-id="checking-for-missing-values">7. Checking for missing values</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For each column, count how many missing (NA) values there are</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">sum</span>(<span class="fu">is.na</span>(.)))) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1
Columns: 21
$ track_id         &lt;int&gt; 0
$ artists          &lt;int&gt; 0
$ album_name       &lt;int&gt; 0
$ track_name       &lt;int&gt; 0
$ popularity       &lt;int&gt; 0
$ duration_ms      &lt;int&gt; 0
$ explicit         &lt;int&gt; 0
$ danceability     &lt;int&gt; 0
$ energy           &lt;int&gt; 0
$ key              &lt;int&gt; 0
$ loudness         &lt;int&gt; 0
$ mode             &lt;int&gt; 0
$ speechiness      &lt;int&gt; 0
$ acousticness     &lt;int&gt; 0
$ instrumentalness &lt;int&gt; 0
$ liveness         &lt;int&gt; 0
$ valence          &lt;int&gt; 0
$ tempo            &lt;int&gt; 0
$ time_signature   &lt;int&gt; 0
$ track_genre      &lt;int&gt; 0
$ popular_or_not   &lt;int&gt; 0</code></pre>
</div>
</div>
<p>Before we go deeper into analysis, it’s important to check for missing data. This code uses <code>across(everything(), ~sum(is.na(.)))</code> to summarize the number of missing (<code>NA</code>) values in every column. Wrapping it in <code>summarize()</code> gives us a one-row summary, and <code>glimpse()</code> formats the output nicely across the screen.</p>
<p>This is a crucial step—missing values can cause problems in plotting, modeling, and calculations. For example, if <code>popularity</code> or <code>energy</code> has NAs, it could throw off our results or cause errors down the line. Always better to catch them early!</p>
</section>
<section id="identifying-numeric-vs-categorical-variables" class="level3">
<h3 class="anchored" data-anchor-id="identifying-numeric-vs-categorical-variables">8. Identifying numeric vs categorical variables</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the class of the entire dataset (it's a tibble/data frame)</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(spotify)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the class of a specific column: track_genre (should be character or factor)</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(spotify<span class="sc">$</span>track_genre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the class of a numeric column: popularity (should be numeric or integer)</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(spotify<span class="sc">$</span>popularity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use purrr::map_dfr() to apply class() to every column and return results as a data frame</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_dfr</span>(spotify, class) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 21
  track_id  artists   album_name track_name popularity duration_ms explicit danceability energy  key     loudness mode    speechiness acousticness
  &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;       
1 character character character  character  numeric    numeric     logical  numeric      numeric numeric numeric  numeric numeric     numeric     
# ℹ 7 more variables: instrumentalness &lt;chr&gt;, liveness &lt;chr&gt;, valence &lt;chr&gt;, tempo &lt;chr&gt;, time_signature &lt;chr&gt;, track_genre &lt;chr&gt;,
#   popular_or_not &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Glimpse the result for a readable, wide-format view of column types</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_dfr</span>(spotify, class) <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1
Columns: 21
$ track_id         &lt;chr&gt; "character"
$ artists          &lt;chr&gt; "character"
$ album_name       &lt;chr&gt; "character"
$ track_name       &lt;chr&gt; "character"
$ popularity       &lt;chr&gt; "numeric"
$ duration_ms      &lt;chr&gt; "numeric"
$ explicit         &lt;chr&gt; "logical"
$ danceability     &lt;chr&gt; "numeric"
$ energy           &lt;chr&gt; "numeric"
$ key              &lt;chr&gt; "numeric"
$ loudness         &lt;chr&gt; "numeric"
$ mode             &lt;chr&gt; "numeric"
$ speechiness      &lt;chr&gt; "numeric"
$ acousticness     &lt;chr&gt; "numeric"
$ instrumentalness &lt;chr&gt; "numeric"
$ liveness         &lt;chr&gt; "numeric"
$ valence          &lt;chr&gt; "numeric"
$ tempo            &lt;chr&gt; "numeric"
$ time_signature   &lt;chr&gt; "numeric"
$ track_genre      &lt;chr&gt; "character"
$ popular_or_not   &lt;chr&gt; "character"</code></pre>
</div>
</div>
<p>To better understand our data, we need to know which columns are numeric and which are categorical. First, we use <code>class()</code> to check the structure of the dataset itself, and then for individual columns like <code>track_genre</code> and <code>popularity</code>.</p>
<p>To scale this up, we apply <code>class()</code> to every column using <code>purrr::map_dfr()</code>, which gives us a tidy summary of each column’s data type. This helps us quickly distinguish between numeric variables (like <code>popularity</code>, <code>danceability</code>, and <code>tempo</code>) and categorical ones (like <code>track_genre</code>, <code>popular_or_not</code>, and <code>explicit</code>).</p>
<p>Knowing this is key—how we summarize, visualize, or model data depends on the type of variable we’re working with. (<a href="https://coggle.it/diagram/V_G2gzukTDoQ-aZt/t/basic-data-visualization">Here’s a mind map</a> to help you get started with basic types if needed.)</p>
</section>
<section id="creating-summary-tables" class="level3">
<h3 class="anchored" data-anchor-id="creating-summary-tables">9. Creating summary tables</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use dplyr to compute common summary statistics for the popularity column</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_popularity =</span> <span class="fu">mean</span>(popularity),         <span class="co"># Mean (average) popularity</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_popularity =</span> <span class="fu">median</span>(popularity),    <span class="co"># Median popularity</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_popularity =</span> <span class="fu">sd</span>(popularity)             <span class="co"># Standard deviation of popularity</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  avg_popularity median_popularity sd_popularity
           &lt;dbl&gt;             &lt;dbl&gt;         &lt;dbl&gt;
1           41.7                48          26.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use moderndive's tidy_summary() to get a full summary of one or more columns</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  moderndive<span class="sc">::</span><span class="fu">tidy_summary</span>(<span class="at">columns =</span> popularity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 11
  column         n group type      min    Q1  mean median    Q3   max    sd
  &lt;chr&gt;      &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 popularity  4311 &lt;NA&gt;  numeric     0    22  41.7     48    61    99  26.3</code></pre>
</div>
</div>
<p>Summary statistics help us understand the overall shape of our data. Here, we’re using <code>summarize()</code> to calculate the mean, median, and standard deviation of the <code>popularity</code> variable. These tell us about the central tendency and spread—how popular the average song is and how much that varies across tracks.</p>
<p>For a cleaner, quicker approach, we can use <code>tidy_summary()</code> from <code>moderndive</code>, which returns a tidy table with many useful stats like minimum, maximum, quartiles, and more. It’s especially handy when exploring new variables and getting a sense of their distributions without writing out each function by hand.</p>
</section>
<section id="quick-plot-of-distribution" class="level3">
<h3 class="anchored" data-anchor-id="quick-plot-of-distribution">10. Quick plot of distribution</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a histogram to visualize the distribution of track popularity scores</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> spotify, <span class="fu">aes</span>(<span class="at">x =</span> popularity)) <span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribution of Track Popularity"</span>, </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Popularity Score"</span>, </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="day1_walkthrough_answers_with_notes_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Histograms are one of the most effective tools for understanding how a numeric variable is distributed. In this example, we’re plotting the <code>popularity</code> of Spotify tracks. The <code>binwidth = 5</code> groups the scores into buckets of five points, and the bars show how many tracks fall into each range.</p>
<p>The color choices—steel blue fill with black borders—help make the histogram visually clear. This plot helps us answer key questions: Are most songs low in popularity? Do we see a skew toward the higher or lower end? And are there any outliers—tracks that are much more or less popular than the rest?</p>
<p>This quick glance sets the stage for deeper exploration.</p>
<hr>
</section>
<section id="session-1-review-questions" class="level3">
<h3 class="anchored" data-anchor-id="session-1-review-questions">Session 1 Review Questions</h3>
<p><strong>(1.1)</strong> Why is Exploratory Data Analysis (EDA) considered a crucial first step in any data science project?</p>
<p>A. It allows you to train models more quickly.<br>
B. It helps reveal patterns, identify data issues, and guide analysis decisions.<br>
C. It replaces the need for data cleaning by automating it.<br>
D. It transforms all variables into numeric format for modeling.</p>
<hr>
<p><strong>(1.2)</strong> What is the role of the <code>distinct()</code> function in preparing your data?</p>
<p>A. It filters out rows with missing values.<br>
B. It removes duplicate rows based on selected columns.<br>
C. It transforms all character variables into factors.<br>
D. It visualizes the distribution of numeric variables.</p>
<hr>
<p><strong>(1.3)</strong> What does the <code>spotify_by_genre</code> dataset contain?</p>
<p>A. Only audio features from 6,000 classical music tracks<br>
B. Survey results about Spotify users’ listening habits<br>
C. Metadata and audio features of 6,000 songs across six genres<br>
D. Real-time streaming counts of trending tracks globally</p>
<hr>
<p><strong>(1.4)</strong> Which function is best used to take a random subset of rows from a dataset?</p>
<p>A. <code>sample_n()</code><br>
B. <code>slice_sample()</code><br>
C. <code>randomize()</code><br>
D. <code>filter()</code></p>
<hr>
<p><strong>(1.5)</strong> What is the purpose of using <code>purrr::map_dfr()</code> in this session?</p>
<p>A. To count the number of missing values in a column<br>
B. To classify songs into popular and non-popular categories<br>
C. To apply a function across all columns and return the results in a single data frame<br>
D. To create visualizations for each genre using ggplot2</p>
<hr>
</section>
<section id="session-1-review-question-answers" class="level3">
<h3 class="anchored" data-anchor-id="session-1-review-question-answers">Session 1 Review Question Answers</h3>
<p><strong>(1.1)</strong> Why is Exploratory Data Analysis (EDA) considered a crucial first step in any data science project?</p>
<p><strong>Correct Answer:</strong><br>
B. It helps reveal patterns, identify data issues, and guide analysis decisions.</p>
<p><strong>Explanation:</strong><br>
EDA helps uncover structure, detect errors, and build intuition about the dataset before modeling or advanced analysis.</p>
<hr>
<p><strong>(1.2)</strong> What is the role of the <code>distinct()</code> function in preparing your data?</p>
<p><strong>Correct Answer:</strong><br>
B. It removes duplicate rows based on selected columns.</p>
<p><strong>Explanation:</strong><br>
Using <code>distinct()</code> ensures you’re not analyzing repeated entries, which could bias your results.</p>
<hr>
<p><strong>(1.3)</strong> What does the <code>spotify_by_genre</code> dataset contain?</p>
<p><strong>Correct Answer:</strong><br>
C. Metadata and audio features of 6,000 songs across six genres</p>
<p><strong>Explanation:</strong><br>
This dataset combines categorical and numeric variables useful for EDA, such as genre, popularity, danceability, and more.</p>
<hr>
<p><strong>(1.4)</strong> Which function is best used to take a random subset of rows from a dataset?</p>
<p><strong>Correct Answer:</strong><br>
B. <code>slice_sample()</code></p>
<p><strong>Explanation:</strong><br>
<code>slice_sample()</code> provides a random selection of rows, which is useful for quick spot-checks or previews of the data.</p>
<hr>
<p><strong>(1.5)</strong> What is the purpose of using <code>purrr::map_dfr()</code> in this session?</p>
<p><strong>Correct Answer:</strong><br>
C. To apply a function across all columns and return the results in a single data frame</p>
<p><strong>Explanation:</strong><br>
This function was used to inspect the class of each column by mapping <code>class()</code> over the dataset and combining the results row-wise.</p>
<hr>
</section>
</section>
<section id="session-2-data-cleaning-fundamentals-with-dplyr-tidyr-and-janitor" class="level2">
<h2 class="anchored" data-anchor-id="session-2-data-cleaning-fundamentals-with-dplyr-tidyr-and-janitor">Session 2: Data Cleaning Fundamentals with <code>dplyr</code>, <code>tidyr</code>, and <code>janitor</code></h2>
<section id="filtering-and-selecting-columns" class="level3">
<h3 class="anchored" data-anchor-id="filtering-and-selecting-columns">11. Filtering and selecting columns</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select a subset of columns and rename track_genre to genre</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Then take a random sample of 20 rows to explore</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(track_name, artists, <span class="at">genre =</span> track_genre, popularity, energy, </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>         danceability) <span class="sc">|&gt;</span> </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 6
   track_name                                                                  artists                            genre popularity energy danceability
   &lt;chr&gt;                                                                       &lt;chr&gt;                              &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;
 1 Somewhere That I Belong                                                     Fairlane;Kala                      dubs…          0  0.911        0.532
 2 Don't Worry My Love                                                         Kaivon                             dubs…         55  0.804        0.511
 3 Falling to Pieces                                                           Faith No More                      metal         41  0.919        0.545
 4 In Your Eyes (feat. Alida) - LUM!X Remix                                    Robin Schulz;Alida;LUM!X           deep…         54  0.777        0.692
 5 Baanina Haniyu                                                              Raghu Dixit                        rock          47  0.384        0.484
 6 Bella Luna                                                                  Jason Mraz                         rock           1  0.454        0.755
 7 If the World Was Ending                                                     Hannah Ellis;Nick Wayne            coun…         49  0.399        0.492
 8 Hanji Hanji                                                                 Amrit Maan;The PropheC             hip-…         63  0.553        0.871
 9 Wolf Totem                                                                  The HU                             metal         61  0.718        0.557
10 An Old Fashioned Love Song - Single Version                                 Three Dog Night                    coun…          0  0.555        0.456
11 Walk Away (feat. Kaptan)                                                    LVNDSCAPE;Kaptan                   deep…         45  0.778        0.677
12 Music Sounds Better with You                                                Alle Farben;Keanu Silva            deep…         60  0.912        0.724
13 Spider                                                                      Said The Sky;Boy In Space          dubs…         40  0.619        0.55 
14 Most Really Pretty Girls Have Pretty Ugly Feet                              HNNY                               deep…         57  0.449        0.929
15 Elevator (Lift Me Up) - Jerry Ropero Tech Boom Mix                          Todd Terry;DJ Pierre;Vonny;Clyde;… deep…          0  0.698        0.798
16 Message In A Bottle - Remastered 2003                                       The Police                         rock           3  0.808        0.568
17 Forgotten                                                                   Linkin Park                        metal         61  0.947        0.615
18 Good Things Fall Apart vs. Sad Songs (With Said The Sky feat. Annika Wells) ILLENIUM;Jon Bellion;Said The Sky… dubs…         59  0.555        0.563
19 Figure.09                                                                   Linkin Park                        metal         60  0.951        0.518
20 Count On Me                                                                 Hogland;Charlie South              deep…         49  0.852        0.396</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for only songs with popularity greater than 80</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Select only key identifying columns, randomly sample 20, then arrange by popularity (descending)</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(popularity <span class="sc">&gt;</span> <span class="dv">80</span>) <span class="sc">|&gt;</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(track_name, artists, popularity) <span class="sc">|&gt;</span> </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">20</span>) <span class="sc">|&gt;</span> </span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(popularity))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 3
   track_name                                             artists                     popularity
   &lt;chr&gt;                                                  &lt;chr&gt;                            &lt;dbl&gt;
 1 I Ain't Worried                                        OneRepublic                         96
 2 Hold Me Closer                                         Elton John;Britney Spears           89
 3 STAY (with Justin Bieber)                              The Kid LAROI;Justin Bieber         89
 4 Bones                                                  Imagine Dragons                     89
 5 No Role Modelz                                         J. Cole                             88
 6 Without Me                                             Eminem                              88
 7 You Proof                                              Morgan Wallen                       86
 8 Running Up That Hill (A Deal With God) - 2018 Remaster Kate Bush                           85
 9 Counting Stars                                         OneRepublic                         83
10 Safe And Sound                                         Capital Cities                      83
11 Fuck Love (feat. Trippie Redd)                         XXXTENTACION;Trippie Redd           83
12 MONTERO (Call Me By Your Name)                         Lil Nas X                           83
13 Unforgettable                                          French Montana;Swae Lee             82
14 All I Want                                             Kodaline                            82
15 Prom Queen                                             Beach Bunny                         82
16 Not Afraid                                             Eminem                              81
17 Tu Aake Dekhle                                         King                                81
18 Whiskey Glasses                                        Morgan Wallen                       81
19 Tennessee Whiskey                                      Chris Stapleton                     81
20 Heathens                                               Twenty One Pilots                   81</code></pre>
</div>
</div>
<p>Here we’re practicing two essential data wrangling techniques: <strong>selecting</strong> and <strong>filtering</strong>. In the first block, we use <code>select()</code> to narrow the dataset to just the columns we care about—song name, artist, genre, popularity, energy, and danceability. We also rename <code>track_genre</code> to <code>genre</code> for convenience, and then <code>slice_sample()</code> gives us 20 random tracks to explore.</p>
<p>In the second block, we use <code>filter()</code> to focus only on songs with high popularity—greater than 80. Then we select just the identifying details (<code>track_name</code>, <code>artists</code>, and <code>popularity</code>), randomly sample 20 rows, and finally sort them from most to least popular using <code>arrange(desc(popularity))</code>.</p>
<p>These are core tools for any kind of EDA—you’ll use <code>select()</code> and <code>filter()</code> constantly to explore different questions in your data.</p>
</section>
<section id="creating-conditional-flags" class="level3">
<h3 class="anchored" data-anchor-id="creating-conditional-flags">12. Creating conditional flags</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new logical column to flag songs with both high energy and high danceability</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">high_energy_dance =</span> energy <span class="sc">&gt;</span> <span class="fl">0.7</span> <span class="sc">&amp;</span> danceability <span class="sc">&gt;</span> <span class="fl">0.7</span>) <span class="sc">|&gt;</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(high_energy_dance)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  high_energy_dance     n
  &lt;lgl&gt;             &lt;int&gt;
1 FALSE              3666
2 TRUE                645</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new categorical column for popularity levels using case_when</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Then count how many songs fall into each category</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">popularity_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    popularity <span class="sc">&gt;=</span> <span class="dv">75</span> <span class="sc">~</span> <span class="st">"high"</span>,</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    popularity <span class="sc">&gt;=</span> <span class="dv">40</span> <span class="sc">~</span> <span class="st">"medium"</span>,</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"low"</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(popularity_group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  popularity_group     n
  &lt;chr&gt;            &lt;int&gt;
1 high               295
2 low               1407
3 medium            2609</code></pre>
</div>
</div>
<p>This step shows how we can create <strong>new variables</strong> to group or flag rows based on conditions. In the first example, we create a logical column called <code>high_energy_dance</code> that is <code>TRUE</code> for songs with both energy and danceability above 0.7. Then we use <code>count()</code> to see how many songs meet that condition.</p>
<p>In the second example, we use <code>case_when()</code> to group tracks into three <strong>popularity categories</strong>: high (75+), medium (40–74), and low (below 40). This kind of conditional transformation is great for making numeric variables easier to analyze, visualize, or summarize as categories.</p>
<p>These techniques help us translate raw numbers into more interpretable groupings or flags—perfect for storytelling and decision-making.</p>
</section>
<section id="creating-new-columns-with-mutate" class="level3">
<h3 class="anchored" data-anchor-id="creating-new-columns-with-mutate">13. Creating new columns with <code>mutate()</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new column that calculates the ratio of energy to danceability</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">energy_dance_ratio =</span> energy <span class="sc">/</span> danceability) <span class="sc">|&gt;</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(track_name, artists, track_genre, energy, </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>         danceability, energy_dance_ratio) <span class="sc">|&gt;</span> </span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 6
   track_name                                    artists                                   track_genre energy danceability energy_dance_ratio
   &lt;chr&gt;                                         &lt;chr&gt;                                     &lt;chr&gt;        &lt;dbl&gt;        &lt;dbl&gt;              &lt;dbl&gt;
 1 "Ele Se Foi"                                  Oficina G3                                metal        0.595        0.551              1.08 
 2 "Freewheelin'"                                Jack Wins;Caitlyn Scarlett                deep-house   0.822        0.598              1.37 
 3 "In Pieces"                                   Linkin Park                               metal        0.886        0.508              1.74 
 4 "Sete"                                        BLOND:ISH;Francis Mercier;Amadou &amp; Mariam deep-house   0.827        0.736              1.12 
 5 "Meus Passos"                                 Oficina G3                                metal        0.941        0.521              1.81 
 6 "Kudi Nu Nachne De (From \"Angrezi Medium\")" Vishal Dadlani;Sachin-Jigar               hip-hop      0.688        0.834              0.825
 7 "Senjitaley"                                  Anirudh Ravichander                       hip-hop      0.941        0.655              1.44 
 8 "Welcome to the Family"                       Avenged Sevenfold                         metal        0.946        0.567              1.67 
 9 "Didn't I"                                    OneRepublic                               rock         0.61         0.611              0.998
10 "Laal Bindi"                                  Akull                                     hip-hop      0.599        0.746              0.803
11 "It’s All on U"                               ILLENIUM;Liam O'Donnell                   dubstep      0.82         0.498              1.65 
12 "Man! I Feel Like A Woman!"                   Shania Twain                              country      0.889        0.654              1.36 
13 "Never Loved You At All"                      Parker McCollum                           country      0.891        0.552              1.61 
14 "Uchiyaan Dewaraan"                           Bilal Saeed;Momina Mustehsan              hip-hop      0.577        0.428              1.35 
15 "Can't Stop Lovin' You"                       Van Halen                                 metal        0.898        0.592              1.52 
16 "Hope For The Future"                         Bastille                                  rock         0.411        0.449              0.915
17 "Call on Me (Ryan Riback Remix)"              Starley;Ryan Riback                       deep-house   0.839        0.67               1.25 
18 "Sidhu Son"                                   Sidhu Moose Wala                          hip-hop      0.732        0.571              1.28 
19 "Wasted Years - 2015 Remaster"                Iron Maiden                               metal        0.959        0.314              3.05 
20 "B2B"                                         James Hype;Tita Lau                       deep-house   0.956        0.799              1.20 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a logical column that flags songs with tempo greater than 140 as high tempo</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Then count how many songs fall into each category</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">high_tempo =</span> tempo <span class="sc">&gt;</span> <span class="dv">140</span>) <span class="sc">|&gt;</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(high_tempo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  high_tempo     n
  &lt;lgl&gt;      &lt;int&gt;
1 FALSE       3079
2 TRUE        1232</code></pre>
</div>
</div>
<p>Here we use <code>mutate()</code> to create brand-new columns based on existing ones. In the first block, we calculate an <code>energy_dance_ratio</code> to compare how energetic a track is relative to how danceable it is. This could help identify songs that are high in energy but maybe not as suitable for dancing—or vice versa.</p>
<p>We then use <code>select()</code> and <code>slice_sample()</code> to view 20 random tracks and inspect this new variable alongside the originals.</p>
<p>In the second block, we add a simple <strong>logical flag</strong>—<code>high_tempo</code>—that marks songs with a tempo over 140 BPM. This kind of binary column is useful for classification or filtering. With <code>count()</code>, we quickly see how many songs are fast-paced versus not.</p>
<p>Creating new columns like these is essential for enriching our dataset and asking deeper, more tailored questions.</p>
</section>
<section id="grouping-and-summarizing" class="level3">
<h3 class="anchored" data-anchor-id="grouping-and-summarizing">14. Grouping and summarizing</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group the data by genre and calculate the average energy for each group</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track_genre) <span class="sc">|&gt;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_energy =</span> <span class="fu">mean</span>(energy, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  track_genre mean_energy
  &lt;chr&gt;             &lt;dbl&gt;
1 country           0.628
2 deep-house        0.742
3 dubstep           0.763
4 hip-hop           0.691
5 metal             0.839
6 rock              0.661</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count how many songs are popular or not within each genre</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(track_genre, popular_or_not)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
   track_genre popular_or_not     n
   &lt;chr&gt;       &lt;chr&gt;          &lt;int&gt;
 1 country     not popular      462
 2 country     popular          133
 3 deep-house  not popular      412
 4 deep-house  popular          491
 5 dubstep     not popular      691
 6 dubstep     popular          180
 7 hip-hop     not popular      170
 8 hip-hop     popular          544
 9 metal       not popular      302
10 metal       popular          473
11 rock        not popular      288
12 rock        popular          165</code></pre>
</div>
</div>
<p>Grouping and summarizing lets us explore patterns across categories. In the first block, we use <code>group_by(track_genre)</code> to break the data into groups by genre, then compute the average energy level for each one. The <code>na.rm = TRUE</code> ensures we ignore missing values when calculating the mean.</p>
<p>In the second block, <code>count(track_genre, popular_or_not)</code> gives us a frequency table showing how many tracks in each genre are labeled as “popular” or “not popular”. This helps us compare how different genres perform in terms of popularity.</p>
<p>These grouped summaries are a powerful way to detect trends and differences between categories in your dataset.</p>
</section>
<section id="wide-to-long-with-tidyrpivot_longer" class="level3">
<h3 class="anchored" data-anchor-id="wide-to-long-with-tidyrpivot_longer">15. Wide to long with <code>tidyr::pivot_longer()</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape selected audio features from wide format to long format</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This creates a 'feature' column for the variable name and a 'value' column for its value</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(track_name, energy, danceability, acousticness) <span class="sc">|&gt;</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(energy, danceability, acousticness),</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">names_to =</span> <span class="st">"feature"</span>,</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">values_to =</span> <span class="st">"value"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12,933 × 3
   track_name                        feature      value
   &lt;chr&gt;                             &lt;chr&gt;        &lt;dbl&gt;
 1 10,000 Hours (with Justin Bieber) energy       0.63 
 2 10,000 Hours (with Justin Bieber) danceability 0.654
 3 10,000 Hours (with Justin Bieber) acousticness 0.153
 4 Country On                        energy       0.751
 5 Country On                        danceability 0.52 
 6 Country On                        acousticness 0.171
 7 Die A Happy Man                   energy       0.389
 8 Die A Happy Man                   danceability 0.59 
 9 Die A Happy Man                   acousticness 0.411
10 Something in the Orange           energy       0.192
# ℹ 12,923 more rows</code></pre>
</div>
</div>
<p>Here we’re using <code>pivot_longer()</code> to reshape our data from wide to long format. We start by selecting three audio features—<code>energy</code>, <code>danceability</code>, and <code>acousticness</code>—along with the track name. Then we “pivot” these features into two columns: one called <code>feature</code> that holds the original variable names, and one called <code>value</code> that holds their corresponding values.</p>
<p>This transformation is super helpful for faceted plots, grouped summaries, or tidy visualizations where we want to treat several columns as values of a single variable. It’s a foundational step for flexible and scalable EDA.</p>
</section>
<section id="long-to-wide-with-tidyrpivot_wider" class="level3">
<h3 class="anchored" data-anchor-id="long-to-wide-with-tidyrpivot_wider">16. Long to wide with <code>tidyr::pivot_wider()</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of songs in each genre by popularity category</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Then reshape the data to have separate columns for 'popular' and 'not popular'</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(track_genre, popular_or_not) <span class="sc">|&gt;</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">names_from =</span> popular_or_not, <span class="at">values_from =</span> n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  track_genre `not popular` popular
  &lt;chr&gt;               &lt;int&gt;   &lt;int&gt;
1 country               462     133
2 deep-house            412     491
3 dubstep               691     180
4 hip-hop               170     544
5 metal                 302     473
6 rock                  288     165</code></pre>
</div>
</div>
<p>Now we’re going in the opposite direction—<strong>long to wide</strong>—using <code>pivot_wider()</code>. First, we count how many songs in each <code>track_genre</code> are labeled as <code>popular</code> or <code>not popular</code>. This gives us a tall table with three columns: genre, popularity label, and count.</p>
<p>Then we use <code>pivot_wider()</code> to spread out the <code>popular_or_not</code> values into separate columns. Each genre now gets its own row, with the counts for “popular” and “not popular” side by side. This format is great for quick comparisons and easier reading or reporting.</p>
</section>
<section id="splitting-a-column-into-multiple-parts-with-tidyrseparate" class="level3">
<h3 class="anchored" data-anchor-id="splitting-a-column-into-multiple-parts-with-tidyrseparate">17. Splitting a column into multiple parts with <code>tidyr::separate()</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the maximum number of artists in any single song by counting semicolons</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add 1 since semicolons separate the names (n artists = n semicolons + 1)</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>max_artists <span class="ot">&lt;-</span> spotify <span class="sc">|&gt;</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(artists, <span class="st">";"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_artists =</span> stringr<span class="sc">::</span><span class="fu">str_count</span>(artists, <span class="st">";"</span>) <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(n_artists) <span class="sc">|&gt;</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">max</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify the song that has the most artists</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_artists =</span> stringr<span class="sc">::</span><span class="fu">str_count</span>(artists, <span class="st">";"</span>) <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_artists)) <span class="sc">|&gt;</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(track_name, artists, n_artists)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  track_name     artists                                                                                                                     n_artists
  &lt;chr&gt;          &lt;chr&gt;                                                                                                                           &lt;dbl&gt;
1 Punjabi Mashup Arjun;Badshah;Bohemia;Diljit Dosanjh;Fateh;Gippy Grewal;Girik Aman;Gupz Sehra;Guru Randhawa;Hans Raj Hans;Harjit Harman;Ha…        31</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a vector of new column names based on the maximum number of artists found</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>artist_cols <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"artist_"</span>, <span class="fu">seq_len</span>(max_artists))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use separate() to split the 'artists' column into multiple artist columns</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use fill = "right" to handle cases with fewer than max_artists</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep the original 'artists' column for reference</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>split_by_artists <span class="ot">&lt;-</span> spotify <span class="sc">|&gt;</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(artists, <span class="st">";"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(artists, <span class="at">into =</span> artist_cols, <span class="at">sep =</span> <span class="st">";"</span>, <span class="at">fill =</span> <span class="st">"right"</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(track_name, artists, track_genre, <span class="fu">all_of</span>(artist_cols))</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>split_by_artists</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 34
   track_name       artists track_genre artist_1 artist_2 artist_3 artist_4 artist_5 artist_6 artist_7 artist_8 artist_9 artist_10 artist_11 artist_12
   &lt;chr&gt;            &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    
 1 10,000 Hours (w… Dan + … country     Dan + S… Justin … &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;     
 2 Put It On Ice    Thomas… country     Thomas … HARDY    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;     
 3 Playing With Fi… Thomas… country     Thomas … Daniell… &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;     
 4 10,000 Hours     Dan + … country     Dan + S… Justin … &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;     
 5 Buy Dirt         Jordan… country     Jordan … Luke Br… &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;     
 6 Tequila - Mushr… Dan + … country     Dan + S… Mushroo… &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;     
 7 Silent Night     Cody J… country     Cody Jo… Clara J… Brandi … Cori Jo… &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;     
 8 Little Drummer … Carrie… country     Carrie … Isaiah … &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;     
 9 Hallelujah       Carrie… country     Carrie … John Le… &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;     
10 Happy Anywhere   Blake … country     Blake S… Gwen St… &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;     
# ℹ 1,694 more rows
# ℹ 19 more variables: artist_13 &lt;chr&gt;, artist_14 &lt;chr&gt;, artist_15 &lt;chr&gt;, artist_16 &lt;chr&gt;, artist_17 &lt;chr&gt;, artist_18 &lt;chr&gt;, artist_19 &lt;chr&gt;,
#   artist_20 &lt;chr&gt;, artist_21 &lt;chr&gt;, artist_22 &lt;chr&gt;, artist_23 &lt;chr&gt;, artist_24 &lt;chr&gt;, artist_25 &lt;chr&gt;, artist_26 &lt;chr&gt;, artist_27 &lt;chr&gt;,
#   artist_28 &lt;chr&gt;, artist_29 &lt;chr&gt;, artist_30 &lt;chr&gt;, artist_31 &lt;chr&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize how many multi-artist songs exist by genre</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>split_by_artists <span class="sc">|&gt;</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track_genre) <span class="sc">|&gt;</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_artists =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(artist_1))) <span class="sc">|&gt;</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_artists))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  track_genre n_artists
  &lt;chr&gt;           &lt;int&gt;
1 dubstep           616
2 deep-house        562
3 hip-hop           364
4 country            74
5 rock               59
6 metal              29</code></pre>
</div>
</div>
<p>Sometimes a single column contains multiple values packed into one string—like artist names separated by semicolons. We start by figuring out the maximum number of artists any one song has, based on the number of semicolons. This helps us decide how many new columns to create when we split the data.</p>
<p>We then use <code>paste0()</code> to generate column names like <code>artist_1</code>, <code>artist_2</code>, etc., and apply <code>separate()</code> to split the <code>artists</code> column. The <code>fill = "right"</code> argument ensures that if a song has fewer than the max number of artists, the remaining columns are just <code>NA</code>.</p>
<p>Finally, we explore which genres tend to feature the most collaborative songs. Grouping by <code>track_genre</code> and counting how many songs had at least one named artist gives insight into genre collaboration trends. This technique is great for unpacking multi-value columns into something more analyzable.</p>
</section>
<section id="uniting-columns" class="level3">
<h3 class="anchored" data-anchor-id="uniting-columns">18. Uniting columns</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the track_name and artists columns into a single column called track_artist</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use " by " as the separator between the song title and the artist(s)</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unite</span>(<span class="st">"track_artist"</span>, track_name, artists, <span class="at">sep =</span> <span class="st">" by "</span>) <span class="sc">|&gt;</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(track_artist, popularity) <span class="sc">|&gt;</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">20</span>) <span class="sc">|&gt;</span> </span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(popularity))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 2
   track_artist                                                 popularity
   &lt;chr&gt;                                                             &lt;dbl&gt;
 1 Do I Wanna Know? by Arctic Monkeys                                   88
 2 Hurt by Johnny Cash                                                  74
 3 Born To Be Wild by Steppenwolf                                       73
 4 Nightmare by Avenged Sevenfold                                       72
 5 Hurricane by I Prevail                                               68
 6 House Of The Rising Sun by Nora Van Elken                            61
 7 Sidhu Son by Sidhu Moose Wala                                        59
 8 Baitikochi Chuste by Anirudh Ravichander                             56
 9 Promises by NERO                                                     56
10 Beautiful by Deepend;Griff Clawson                                   56
11 Empty Floor by Jan Blomqvist                                         53
12 Empty Love by Lulleaux;Kid Princess                                  51
13 Promises - Skrillex &amp; Nero Remix by NERO                             44
14 Stomach It by Crywolf;EDEN                                           44
15 Forgive Me Now by BH                                                 42
16 Ammunition by Krewella                                               38
17 Xelela Abazali by Deep Sen;KingTalkzin;KnightSA;Russell Zuma         29
18 Like a Movie feat. Haexxa by Alfred Heinrichs;Haexxa                 26
19 O Holy Night by Lauren Alaina                                         0
20 Christmas Makes Me Cry by Kacey Musgraves                             0</code></pre>
</div>
</div>
<p>Sometimes it’s helpful to merge two or more columns into a single descriptive label. Here, we use <code>unite()</code> to create a new column called <code>track_artist</code> that combines the song title and the artist(s) into one readable string like “Blinding Lights by The Weeknd”.</p>
<p>We then select this new column along with <code>popularity</code>, randomly sample 20 rows, and sort them by popularity in descending order. This can be useful for display purposes—especially when labeling charts or reports—because it gives you a clean, interpretable identifier for each track.</p>
</section>
<section id="cleaning-up-with-janitor" class="level3">
<h3 class="anchored" data-anchor-id="cleaning-up-with-janitor">19. Cleaning up with <code>janitor</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate messy column names by renaming clean ones to include emojis, symbols, and inconsistent formatting</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>spotify_unruly <span class="ot">&lt;-</span> spotify <span class="sc">|&gt;</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Track Name 🎵</span><span class="st">`</span> <span class="ot">=</span> track_name,</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">ARTISTS (main + featured)</span><span class="st">`</span> <span class="ot">=</span> artists,</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Album-Name___v2</span><span class="st">`</span> <span class="ot">=</span> album_name,</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">DURATION (ms)</span><span class="st">`</span> <span class="ot">=</span> duration_ms,</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Popularity SCORE (%)</span><span class="st">`</span> <span class="ot">=</span> popularity,</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">track genre!</span><span class="st">`</span> <span class="ot">=</span> track_genre,</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Explicit?</span><span class="st">`</span> <span class="ot">=</span> explicit,</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">IS_IT_POPULAR????</span><span class="st">`</span> <span class="ot">=</span> popular_or_not</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">valence =</span> <span class="cn">NA_real_</span>)  <span class="co"># Add an entirely empty column to test janitor functions</span></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the column names and dimensions before cleaning</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(spotify_unruly)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "track_id"                  "ARTISTS (main + featured)" "Album-Name___v2"           "Track Name 🎵"             "Popularity SCORE (%)"     
 [6] "DURATION (ms)"             "Explicit?"                 "danceability"              "energy"                    "key"                      
[11] "loudness"                  "mode"                      "speechiness"               "acousticness"              "instrumentalness"         
[16] "liveness"                  "valence"                   "tempo"                     "time_signature"            "track genre!"             
[21] "IS_IT_POPULAR????"        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(spotify_unruly)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4311   21</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean the messy column names: make them lowercase, snake_case, and remove special characters</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove any completely empty columns</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>spotify_cleaned_some <span class="ot">&lt;-</span> spotify_unruly <span class="sc">|&gt;</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">remove_empty</span>(<span class="at">which =</span> <span class="st">"cols"</span>)</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the new cleaned column names and dimensions</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(spotify_cleaned_some)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "track_id"                 "artists_main_featured"    "album_name_v2"            "track_name"               "popularity_score_percent"
 [6] "duration_ms"              "explicit"                 "danceability"             "energy"                   "key"                     
[11] "loudness"                 "mode"                     "speechiness"              "acousticness"             "instrumentalness"        
[16] "liveness"                 "tempo"                    "time_signature"           "track_genre"              "is_it_popular"           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(spotify_cleaned_some)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4311   20</code></pre>
</div>
</div>
<p>This walkthrough shows how the <code>janitor</code> package can help clean up messy datasets quickly and reliably. In the first block, we deliberately mess up the column names to simulate real-world scenarios—adding emojis, extra symbols, inconsistent casing, and spacing.</p>
<p>Then, we use <code>clean_names()</code> to standardize everything: it converts all names to lowercase, replaces spaces and symbols with underscores, and strips out noise. We also add a column of all missing values to demonstrate how <code>remove_empty()</code> works—it detects and drops columns that contain only <code>NA</code>s.</p>
<p>After running these steps, the dataset is much easier to work with programmatically, especially when writing code that references column names directly. This kind of cleanup is one of the first things you’ll often do when importing raw data.</p>
</section>
<section id="reordering-and-recoding-variables" class="level3">
<h3 class="anchored" data-anchor-id="reordering-and-recoding-variables">20. Reordering and recoding variables</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Move the track_genre column to appear right before track_id</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode popular_or_not into a new column popular_recoded using case_match</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Place the new column directly after track_genre</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(track_genre, <span class="at">.before =</span> track_id) <span class="sc">|&gt;</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">popular_recoded =</span> <span class="fu">case_match</span>(popular_or_not, </span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">"popular"</span> <span class="sc">~</span> <span class="st">"yes"</span>, </span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">"not popular"</span> <span class="sc">~</span> <span class="st">"no"</span>),</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">.after =</span> track_genre) <span class="sc">|&gt;</span> </span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="sc">|&gt;</span> </span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 6
   track_genre popular_recoded track_id               artists                  album_name                        track_name                       
   &lt;chr&gt;       &lt;chr&gt;           &lt;chr&gt;                  &lt;chr&gt;                    &lt;chr&gt;                             &lt;chr&gt;                            
 1 country     yes             2wrJq5XKLnmhRXHIAf9xBa Dan + Shay;Justin Bieber 10,000 Hours (with Justin Bieber) 10,000 Hours (with Justin Bieber)
 2 country     no              6AHJTA1BN7ePfChCwqph3z Luke Bryan               Country USA                       Country On                       
 3 country     no              5eUtyONoPyfZYGrFHmZzlc Thomas Rhett             Mientras hago aromaterapia        Die A Happy Man                  
 4 country     no              1e3QZ42GsP8cTy5uQ0G7J3 Zach Bryan               New Country                       Something in the Orange          
 5 country     no              43WFp6WBAvNgc7iaFFEUJp Luke Bryan               Tailgate Country                  Country Girl (Shake It For Me)   
 6 country     no              16LAkUOZbmqdHgicUsHY1S Thomas Rhett             Sad Country Songs                 Slow Down Summer                 
 7 country     no              6rfDtM5aHbsaLGAUxfIgpN Florida Georgia Line     Sad Country Songs                 Stay                             
 8 country     no              24NRxtqD6oySjRnAZxa4Hf Zach Bryan               Country Car Hits                  Oklahoma Smokeshow               
 9 country     no              3opqy7HYeNHQaUwYVS7cLo Thomas Rhett;HARDY       Tailgate Country                  Put It On Ice                    
10 country     no              66ERrn57fmkbOq9zhELGPv Zach Bryan               rainy day indie                   November Air                     </code></pre>
</div>
</div>
<p>This code shows how to fine-tune the layout and values in your dataset. First, we use <code>relocate()</code> to move the <code>track_genre</code> column right before <code>track_id</code>, making it easier to see genre info up front.</p>
<p>Then we use <code>mutate()</code> with <code>case_match()</code> to create a new column, <code>popular_recoded</code>, that recodes <code>"popular"</code> to <code>"yes"</code> and <code>"not popular"</code> to <code>"no"</code>. We position this new column right after <code>track_genre</code> using <code>.after</code>.</p>
<p>Finally, we use <code>select(1:6)</code> to look at just the first six columns and <code>slice_head(n = 10)</code> to preview the top ten rows. This combination is great for tidying up column order and recoding values into more intuitive formats.</p>
<hr>
</section>
<section id="session-2-review-questions" class="level3">
<h3 class="anchored" data-anchor-id="session-2-review-questions">Session 2 Review Questions</h3>
<p><strong>(2.1)</strong> What is the purpose of using <code>filter()</code> in data wrangling with <code>dplyr</code>?</p>
<p>A. To remove missing values from all columns.<br>
B. To select specific columns by name.<br>
C. To remove duplicate rows from a dataset.<br>
D. To return only rows that meet a certain condition.</p>
<hr>
<p><strong>(2.2)</strong> What is the result of using the <code>mutate()</code> function in a <code>dplyr</code> pipeline?</p>
<p>A. It permanently deletes rows that contain NA values.<br>
B. It creates new columns or modifies existing ones.<br>
C. It filters the dataset by logical conditions.<br>
D. It combines multiple columns into one.</p>
<hr>
<p><strong>(2.3)</strong> What does the following code do in the context of the <code>spotify_by_genre</code> dataset?</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">high_acoustic_mellow =</span> acousticness <span class="sc">&gt;</span> <span class="fl">0.8</span> <span class="sc">&amp;</span> valence <span class="sc">&lt;</span> <span class="fl">0.4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A. It filters the dataset to only include mellow and acoustic songs.<br>
B. It creates a new variable indicating whether a song is both highly acoustic and low in valence.<br>
C. It summarizes acousticness and valence for mellow songs.<br>
D. It creates a histogram of acousticness for songs with low valence.</p>
<hr>
<p><strong>(2.4)</strong> What is the effect of <code>pivot_longer()</code> on a dataset?</p>
<p>A. It removes NA values from multiple columns.<br>
B. It splits a character column into multiple columns.<br>
C. It summarizes grouped values into wider format tables.<br>
D. It transforms columns into key-value pairs, increasing the number of rows.</p>
<hr>
<p><strong>(2.5)</strong> Why is <code>janitor::clean_names()</code> helpful in the data cleaning process?</p>
<p>A. It changes all character variables to numeric format.<br>
B. It fills in missing values in your dataset.<br>
C. It converts messy column names to consistent, lowercase, snake_case format.<br>
D. It rearranges the rows of the dataset based on alphabetical order.</p>
<hr>
</section>
<section id="session-2-review-question-answers" class="level3">
<h3 class="anchored" data-anchor-id="session-2-review-question-answers">Session 2 Review Question Answers</h3>
<p><strong>(2.1)</strong> What is the purpose of using <code>filter()</code> in data wrangling with <code>dplyr</code>?</p>
<p><strong>Correct Answer:</strong><br>
D. To return only rows that meet a certain condition.</p>
<p><strong>Explanation:</strong><br>
<code>filter()</code> keeps rows based on a logical condition, helping narrow your dataset to just what you’re interested in analyzing.</p>
<hr>
<p><strong>(2.2)</strong> What is the result of using the <code>mutate()</code> function in a <code>dplyr</code> pipeline?</p>
<p><strong>Correct Answer:</strong><br>
B. It creates new columns or modifies existing ones.</p>
<p><strong>Explanation:</strong><br>
<code>mutate()</code> allows you to add or alter columns using logic, math, or transformations, making it essential for feature engineering.</p>
<hr>
<p><strong>(2.3)</strong> What does the following code do in the context of the <code>spotify_by_genre</code> dataset?</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">high_acoustic_mellow =</span> acousticness <span class="sc">&gt;</span> <span class="fl">0.8</span> <span class="sc">&amp;</span> valence <span class="sc">&lt;</span> <span class="fl">0.4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Correct Answer:</strong><br>
B. It creates a new variable indicating whether a song is both highly acoustic and low in valence.</p>
<p><strong>Explanation:</strong><br>
This code adds a new logical column called <code>high_acoustic_mellow</code>, which is <code>TRUE</code> if the song’s <code>acousticness</code> is greater than 0.8 <strong>and</strong> its <code>valence</code> is less than 0.4—capturing songs that are both acoustic and emotionally mellow.</p>
<hr>
<p><strong>(2.4)</strong> What is the effect of <code>pivot_longer()</code> on a dataset?</p>
<p><strong>Correct Answer:</strong><br>
D. It transforms columns into key-value pairs, increasing the number of rows.</p>
<p><strong>Explanation:</strong><br>
<code>pivot_longer()</code> reshapes wide data into long format, useful for tidy plotting and modeling.</p>
<hr>
<p><strong>(2.5)</strong> Why is <code>janitor::clean_names()</code> helpful in the data cleaning process?</p>
<p><strong>Correct Answer:</strong><br>
C. It converts messy column names to consistent, lowercase, snake_case format.</p>
<p><strong>Explanation:</strong><br>
This function simplifies variable names by removing special characters and spaces, making them easier to reference in code.</p>
<hr>
</section>
</section>
<section id="session-3-managing-dates-strings-and-categories" class="level2">
<h2 class="anchored" data-anchor-id="session-3-managing-dates-strings-and-categories">Session 3: Managing Dates, Strings, and Categories</h2>
<section id="working-with-strings-using-stringr" class="level3">
<h3 class="anchored" data-anchor-id="working-with-strings-using-stringr">21. Working with strings using <code>stringr</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new column that counts the number of characters in each track name</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Then display the track names sorted by length in descending order</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name_length =</span> <span class="fu">str_length</span>(track_name)) <span class="sc">|&gt;</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(track_name, name_length) <span class="sc">|&gt;</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(name_length)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,311 × 2
   track_name                                                                                  name_length
   &lt;chr&gt;                                                                                             &lt;int&gt;
 1 "A Thousand Years (feat. Steve Kazee) - Pt. 2; The Twilight Saga: Breaking Dawn Soundtrack"          89
 2 "Where Are You Christmas - From \"Dr. Seuss' How The Grinch Stole Christmas\" Soundtrack"            85
 3 "I Put A Spell On You (Fifty Shades of Grey) - From \"Fifty Shades Of Grey\" Soundtrack"             84
 4 "Last One Standing (feat. Polo G, Mozzy &amp; Eminem) - From Venom: Let There Be Carnage"                83
 5 "Double Talkin' Jive - Live In Las Vegas, Thomas &amp; Mack Center - January 25, 1992"                   80
 6 "Rockin' Around The Christmas Tree - From The Kacey Musgraves Christmas Show"                        75
 7 "Good Things Fall Apart vs. Sad Songs (With Said The Sky feat. Annika Wells)"                        75
 8 "I'll Be Home For Christmas - From The Kacey Musgraves Christmas Show"                               68
 9 "Good Things Fall Apart (with Jon Bellion) [Tiësto's Big Room Remix]"                                67
10 "Sympathy For The Devil - 50th Anniversary Edition / Remastered 2018"                                67
# ℹ 4,301 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Detect songs where the title includes the word "love" (case-insensitive)</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use str_to_lower to ensure consistent matching</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>  love_songs <span class="ot">&lt;-</span> spotify <span class="sc">|&gt;</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(track_name), <span class="st">"love"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(track_genre, track_name)</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 147 × 2
   track_genre track_name                       
   &lt;chr&gt;       &lt;chr&gt;                            
 1 country     I Love My Country                
 2 country     Fall in Love                     
 3 country     Never Been in Love               
 4 country     Don't Fall In Love With A Dreamer
 5 country     Like We Never Loved at All       
 6 country     Let's Make Love                  
 7 country     Drunk on Your Love               
 8 country     I Love You, I Love You           
 9 country     You Should Be Loved              
10 country     Love Will Keep Us Alive          
# ℹ 137 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count how many "love" songs appear in each genre</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the percentage of total songs that mention "love" for each genre</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>love_songs <span class="sc">|&gt;</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">love =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track_genre) <span class="sc">|&gt;</span></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_love =</span> <span class="fu">sum</span>(love)) <span class="sc">|&gt;</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_love =</span> n_love <span class="sc">/</span> <span class="fu">nrow</span>(spotify) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pct_love))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  track_genre n_love pct_love
  &lt;chr&gt;        &lt;dbl&gt;    &lt;dbl&gt;
1 deep-house      55    1.28 
2 dubstep         31    0.719
3 hip-hop         21    0.487
4 country         20    0.464
5 metal           11    0.255
6 rock             9    0.209</code></pre>
</div>
</div>
<p>Here we explore string manipulation using the <code>stringr</code> package. First, we use <code>str_length()</code> to count the number of characters in each track name, which can help identify long or unusually titled songs.</p>
<p>Next, we search for songs with the word “love” in the title using <code>str_detect()</code> after converting everything to lowercase with <code>str_to_lower()</code>. This ensures that we match “Love”, “love”, or “LOVE” equally.</p>
<p>Finally, we summarize how often “love” appears in song titles across genres. We add a dummy variable <code>love = 1</code> to count matches, group by genre, and compute both the total count and the percentage relative to the entire dataset. This gives us insight into which genres most frequently express themes of love in their titles.</p>
</section>
<section id="extracting-and-replacing-substrings" class="level3">
<h3 class="anchored" data-anchor-id="extracting-and-replacing-substrings">22. Extracting and replacing substrings</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove all parentheses from track names</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track_name_clean =</span> <span class="fu">str_remove_all</span>(track_name, <span class="st">"</span><span class="sc">\\</span><span class="st">(.*?</span><span class="sc">\\</span><span class="st">)"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(track_name, track_name_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,311 × 2
   track_name                        track_name_clean         
   &lt;chr&gt;                             &lt;chr&gt;                    
 1 10,000 Hours (with Justin Bieber) "10,000 Hours "          
 2 Country On                        "Country On"             
 3 Die A Happy Man                   "Die A Happy Man"        
 4 Something in the Orange           "Something in the Orange"
 5 Country Girl (Shake It For Me)    "Country Girl "          
 6 Slow Down Summer                  "Slow Down Summer"       
 7 Stay                              "Stay"                   
 8 Oklahoma Smokeshow                "Oklahoma Smokeshow"     
 9 Put It On Ice                     "Put It On Ice"          
10 November Air                      "November Air"           
# ℹ 4,301 more rows</code></pre>
</div>
</div>
<section id="goal-of-this-code" class="level4">
<h4 class="anchored" data-anchor-id="goal-of-this-code">Goal of This Code</h4>
<p>To <strong>remove all text in parentheses</strong> from the <code>track_name</code> column of the <code>spotify</code> data frame.</p>
<p>Example:<br>
- <code>"Blinding Lights (Remix)"</code> → <code>"Blinding Lights"</code><br>
- <code>"Dance Monkey (with XYZ)"</code> → <code>"Dance Monkey"</code></p>
</section>
<section id="breakdown-of-the-regex-." class="level4">
<h4 class="anchored" data-anchor-id="breakdown-of-the-regex-.">Breakdown of the Regex: <code>"\\(.*?\\)"</code></h4>
<p>Let’s look at the expression inside <code>str_remove_all()</code>:</p>
<section id="section" class="level5">
<h5 class="anchored" data-anchor-id="section"><code>\\(</code></h5>
<ul>
<li>In R, we escape the backslash, so <code>\\(</code> becomes <code>\(</code> in the actual regex engine.<br>
</li>
<li>This matches a literal <strong>opening parenthesis</strong> <code>(</code>.</li>
</ul>
</section>
<section id="section-1" class="level5">
<h5 class="anchored" data-anchor-id="section-1"><code>.*?</code></h5>
<ul>
<li><code>.</code> = Match <strong>any character</strong> (except newlines)<br>
</li>
<li><code>*</code> = Match <strong>0 or more</strong> of the previous token (i.e., “any character”)<br>
</li>
<li><code>?</code> = Makes the <code>*</code> <strong>non-greedy</strong> (also known as lazy matching)</li>
</ul>
<p>So <code>.*?</code> means:<br>
→ “Match as few characters as possible until the next part of the pattern matches.”</p>
<p>This ensures we <strong>stop at the first closing parenthesis</strong>, not the last.</p>
</section>
<section id="section-2" class="level5">
<h5 class="anchored" data-anchor-id="section-2"><code>\\)</code></h5>
<ul>
<li>Again, the double backslash escapes a literal parenthesis.<br>
</li>
<li><code>\\)</code> matches a <strong>literal closing parenthesis</strong> <code>)</code>.</li>
</ul>
</section>
</section>
<section id="putting-it-all-together" class="level4">
<h4 class="anchored" data-anchor-id="putting-it-all-together">Putting It All Together</h4>
<p><code>"\\(.*?\\)"</code><br>
→ Match any <strong>text in parentheses</strong>, including the parentheses themselves, using a <strong>non-greedy</strong> pattern.</p>
</section>
<section id="why-non-greedy-.-is-important" class="level4">
<h4 class="anchored" data-anchor-id="why-non-greedy-.-is-important">Why Non-Greedy (<code>.*?</code>) Is Important</h4>
<p>If you used a greedy pattern like <code>\\(.*\\)</code> on this:</p>
<pre><code>"Song One (Remix) and More (Live)"</code></pre>
<p>You’d get:</p>
<pre><code>"Song One"</code></pre>
<p>Because greedy matching would grab:</p>
<pre><code>(Remix) and More (Live)</code></pre>
<p>With <code>.*?</code>, it correctly removes only: - <code>(Remix)</code><br>
- <code>(Live)</code><br>
Leaving the rest intact.</p>
</section>
<section id="final-output" class="level4">
<h4 class="anchored" data-anchor-id="final-output">Final Output</h4>
<p>The result is a new column <code>track_name_clean</code> where all parenthetical parts (like remix versions or featured artists) are removed for <strong>cleaner display or grouping</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract featured artist from parentheses</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">featuring =</span> <span class="fu">str_extract</span>(</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>    track_name, </span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(?i)(?&lt;=</span><span class="sc">\\</span><span class="st">()(with|feat</span><span class="sc">\\</span><span class="st">.)[^)]*(?=</span><span class="sc">\\</span><span class="st">))"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(track_name, featuring) <span class="sc">|&gt;</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">featuring =</span> <span class="fu">str_replace_all</span>(featuring, <span class="st">"with |feat. "</span>, <span class="st">""</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(featuring))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 261 × 2
   track_name                                                  featuring            
   &lt;chr&gt;                                                       &lt;chr&gt;                
 1 10,000 Hours (with Justin Bieber)                           Justin Bieber        
 2 Whiskey Lullaby (feat. Alison Krauss)                       Alison Krauss        
 3 10,000 Hours (with Justin Bieber) - Piano                   Justin Bieber        
 4 I Hope (feat. Charlie Puth)                                 Charlie Puth         
 5 Dance with the Devil (feat. Katie Noel &amp; Chucky V)          Katie Noel &amp; Chucky V
 6 On Me (feat. Ava Max)                                       Ava Max              
 7 Take Me Home (with Kane Brown)                              Kane Brown           
 8 What Ifs (feat. Lauren Alaina)                              Lauren Alaina        
 9 Trying to Reason With Hurricane Season (with Jimmy Buffett) Jimmy Buffett        
10 Sugar (feat. Francesco Yates)                               Francesco Yates      
# ℹ 251 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="wrangling-artists-into-long-format" class="level3">
<h3 class="anchored" data-anchor-id="wrangling-artists-into-long-format">23. Wrangling artists into long format</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use separate_rows() to split multiple artists into individual rows</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This turns collaborations into separate entries for each artist</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  artists_long <span class="ot">&lt;-</span> spotify <span class="sc">|&gt;</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span><span class="fu">separate_rows</span>(artists, <span class="at">sep =</span> <span class="st">";"</span>)</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,642 × 21
   track_id            artists album_name track_name popularity duration_ms explicit danceability energy   key loudness  mode speechiness acousticness
   &lt;chr&gt;               &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt;       &lt;dbl&gt; &lt;lgl&gt;           &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
 1 2wrJq5XKLnmhRXHIAf… Dan + … 10,000 Ho… 10,000 Ho…         78      167693 FALSE           0.654  0.63     10    -4.64     1      0.0259      0.153  
 2 2wrJq5XKLnmhRXHIAf… Justin… 10,000 Ho… 10,000 Ho…         78      167693 FALSE           0.654  0.63     10    -4.64     1      0.0259      0.153  
 3 6AHJTA1BN7ePfChCwq… Luke B… Country U… Country On          0      236455 FALSE           0.52   0.751     5    -5.06     1      0.0551      0.171  
 4 5eUtyONoPyfZYGrFHm… Thomas… Mientras … Die A Hap…          1      228320 FALSE           0.59   0.389     2    -9.24     1      0.0387      0.411  
 5 1e3QZ42GsP8cTy5uQ0… Zach B… New Count… Something…          3      228013 FALSE           0.369  0.192     4   -12.2      0      0.04        0.555  
 6 43WFp6WBAvNgc7iaFF… Luke B… Tailgate … Country G…          2      225560 FALSE           0.644  0.904     2    -4.53     1      0.0464      0.0295 
 7 16LAkUOZbmqdHgicUs… Thomas… Sad Count… Slow Down…          8      216764 FALSE           0.464  0.755     4    -5.71     1      0.0354      0.00838
 8 6rfDtM5aHbsaLGAUxf… Florid… Sad Count… Stay                2      200426 FALSE           0.493  0.931     1    -2.99     1      0.041       0.0838 
 9 24NRxtqD6oySjRnAZx… Zach B… Country C… Oklahoma …          3      211739 FALSE           0.544  0.573     8    -5.69     1      0.0356      0.0958 
10 3opqy7HYeNHQaUwYVS… Thomas… Tailgate … Put It On…          0      184800 FALSE           0.554  0.757     0    -4.30     1      0.0355      0.0101 
# ℹ 6,632 more rows
# ℹ 7 more variables: instrumentalness &lt;dbl&gt;, liveness &lt;dbl&gt;, valence &lt;dbl&gt;, tempo &lt;dbl&gt;, time_signature &lt;dbl&gt;, track_genre &lt;chr&gt;,
#   popular_or_not &lt;chr&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count how many times each artist appears across all tracks</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Artists involved in collaborations will be counted multiple times</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>artists_long <span class="sc">|&gt;</span> </span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(artists, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,688 × 2
   artists                   n
   &lt;chr&gt;                 &lt;int&gt;
 1 ILLENIUM                 91
 2 Anirudh Ravichander      79
 3 Sidhu Moose Wala         63
 4 Linkin Park              59
 5 SLANDER                  35
 6 Seven Lions              34
 7 Tritonal                 29
 8 AP Dhillon               28
 9 Red Hot Chili Peppers    28
10 Porter Robinson          27
# ℹ 2,678 more rows</code></pre>
</div>
</div>
<p>In this walkthrough, we’re unpacking the <code>artists</code> column so that each artist involved in a collaboration appears on its own row. <code>separate_rows()</code> makes this easy by splitting on semicolons and repeating the other columns for each artist.</p>
<p>This long format is especially useful when we want to analyze artist-level data—like how often a particular artist appears in the dataset. After the transformation, we use <code>count()</code> to get a frequency table of artists, sorted by how many tracks they’re involved in. This approach captures both solo performances and collaborations in a unified way.</p>
</section>
<section id="cleaning-and-recoding-categories" class="level3">
<h3 class="anchored" data-anchor-id="cleaning-and-recoding-categories">24. Cleaning and recoding categories</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use fct_lump() to group all but the top 3 most common genres into "Other"</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track_genre =</span> forcats<span class="sc">::</span><span class="fu">fct_lump</span>(track_genre, <span class="at">n =</span> <span class="dv">3</span>)) <span class="sc">|&gt;</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(track_genre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  track_genre     n
  &lt;fct&gt;       &lt;int&gt;
1 deep-house    903
2 dubstep       871
3 metal         775
4 Other        1762</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View the current counts for popular_or_not to check the ordering and distribution</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span> </span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(popular_or_not)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  popular_or_not     n
  &lt;chr&gt;          &lt;int&gt;
1 not popular     2325
2 popular         1986</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder factor levels for popular_or_not so that "popular" appears first</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">popular_or_not =</span> forcats<span class="sc">::</span><span class="fu">fct_relevel</span>(popular_or_not, <span class="st">"popular"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(popular_or_not)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  popular_or_not     n
  &lt;fct&gt;          &lt;int&gt;
1 popular         1986
2 not popular     2325</code></pre>
</div>
</div>
<p>This walkthrough focuses on <strong>cleaning and reordering categorical variables</strong> to make them easier to work with in analysis and plotting. First, we use <code>fct_lump()</code> to simplify the <code>track_genre</code> variable by keeping the top 3 genres and lumping all the rest into a single “Other” category. This is helpful when a variable has many unique levels but we want to focus on the most common ones.</p>
<p>Next, we inspect the <code>popular_or_not</code> variable with <code>count()</code> to see its current levels and order. Then we apply <code>fct_relevel()</code> to move <code>"popular"</code> to the front. This kind of reordering is especially useful for controlling how categories appear in plots and summaries—ensuring the most relevant group shows up first.</p>
</section>
<section id="counting-words-in-track-names" class="level3">
<h3 class="anchored" data-anchor-id="counting-words-in-track-names">25. Counting words in track names</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new column that counts the number of words in each track name</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">word_count =</span> <span class="fu">str_count</span>(track_name, <span class="st">"</span><span class="sc">\\</span><span class="st">w+"</span>)</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Group by genre and calculate the average word count per genre</span></span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track_genre) <span class="sc">|&gt;</span></span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_words =</span> <span class="fu">mean</span>(word_count, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Reorder genres based on average word count for clearer plotting</span></span>
<span id="cb100-17"><a href="#cb100-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track_genre =</span> <span class="fu">fct_reorder</span>(track_genre, avg_words)) <span class="sc">|&gt;</span></span>
<span id="cb100-18"><a href="#cb100-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-19"><a href="#cb100-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a horizontal bar chart of average word counts by genre</span></span>
<span id="cb100-20"><a href="#cb100-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> track_genre, <span class="at">y =</span> avg_words)) <span class="sc">+</span></span>
<span id="cb100-21"><a href="#cb100-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb100-22"><a href="#cb100-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-23"><a href="#cb100-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the rounded average word count at the end of each bar</span></span>
<span id="cb100-24"><a href="#cb100-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(avg_words, <span class="dv">1</span>)), <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span></span>
<span id="cb100-25"><a href="#cb100-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-26"><a href="#cb100-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Flip coordinates so genres appear on the y-axis</span></span>
<span id="cb100-27"><a href="#cb100-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb100-28"><a href="#cb100-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-29"><a href="#cb100-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add labels and title</span></span>
<span id="cb100-30"><a href="#cb100-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb100-31"><a href="#cb100-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Average Number of Words in Track Names by Genre"</span>,</span>
<span id="cb100-32"><a href="#cb100-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Track Genre"</span>,</span>
<span id="cb100-33"><a href="#cb100-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Word Count"</span></span>
<span id="cb100-34"><a href="#cb100-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb100-35"><a href="#cb100-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-36"><a href="#cb100-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Apply a clean minimal theme</span></span>
<span id="cb100-37"><a href="#cb100-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="day1_walkthrough_answers_with_notes_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This visualization explores how wordy track titles are across different genres. We start by using <code>str_count()</code> with the <code>\\w+</code> pattern to count words in each track name. Then we calculate the average word count within each genre using <code>group_by()</code> and <code>summarize()</code>.</p>
<p>We reorder the genres by average word count with <code>fct_reorder()</code> so the plot is easier to interpret. A horizontal bar chart (<code>geom_col()</code> + <code>coord_flip()</code>) shows each genre’s average, and <code>geom_text()</code> adds the actual values to the end of the bars for clarity.</p>
<p>This is a great example of combining text analysis with visualization to reveal stylistic trends in music naming.</p>
</section>
<section id="checking-for-artists-appearing-in-multiple-genres" class="level3">
<h3 class="anchored" data-anchor-id="checking-for-artists-appearing-in-multiple-genres">26. Checking for artists appearing in multiple genres</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Split artists so each appears in their own row (for collaborations)</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(artists, <span class="at">sep =</span> <span class="st">";"</span>) <span class="sc">|&gt;</span></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Keep only distinct artist–genre pairs</span></span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(artists, track_genre) <span class="sc">|&gt;</span></span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Group by artist and filter for those appearing in more than one genre</span></span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(artists) <span class="sc">|&gt;</span></span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n_distinct</span>(track_genre) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb101-13"><a href="#cb101-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb101-14"><a href="#cb101-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort alphabetically and display artist–genre combinations</span></span>
<span id="cb101-15"><a href="#cb101-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(artists) <span class="sc">|&gt;</span></span>
<span id="cb101-16"><a href="#cb101-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(artists, track_genre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 115 × 2
# Groups:   artists [57]
   artists           track_genre
   &lt;chr&gt;             &lt;chr&gt;      
 1 Alok              dubstep    
 2 Alok              rock       
 3 Asking Alexandria dubstep    
 4 Asking Alexandria metal      
 5 Atreyu            dubstep    
 6 Atreyu            metal      
 7 BANNERS           dubstep    
 8 BANNERS           rock       
 9 Billy Ray Cyrus   country    
10 Billy Ray Cyrus   hip-hop    
# ℹ 105 more rows</code></pre>
</div>
</div>
<p>This code answers the question: <em>Which artists span multiple genres in our dataset?</em> We begin by using <code>separate_rows()</code> to split up collaborations so each artist gets their own row.</p>
<p>Next, we use <code>distinct()</code> to remove duplicate artist–genre combinations. Then, we group by artist and use <code>n_distinct()</code> inside <code>filter()</code> to find only those artists who appear in <strong>more than one genre</strong>.</p>
<p>Finally, we sort the results and select just the artist and genre columns. This is a powerful way to explore artist versatility and cross-genre collaborations in the dataset.</p>
</section>
<section id="parsing-dates-with-lubridate-and-azflights24" class="level3">
<h3 class="anchored" data-anchor-id="parsing-dates-with-lubridate-and-azflights24">27. Parsing dates with <code>lubridate</code> and <code>azflights24</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the azflights24 and lubridate packages for flight data and date manipulation</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(azflights24)</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'lubridate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    date, intersect, setdiff, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview a random sample of flight records</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum origin dest  air_time distance  hour
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
 1  2024     5     7     1544           1552        -8     2140           2217       -37 AA         644 N954NN  PHX    IND        158     1488    15
 2  2024    11    20      732            735        -3      836            840        -4 WN         141 N8759Q  PHX    OAK        109      646     7
 3  2024    10     7     1330           1335        -5     1649           1651        -2 OO        1316 N732SK  PHX    BOI        113      735    13
 4  2024     2     8     1710           1712        -2     2331           2359       -28 AA         119 N443AA  PHX    BOS        235     2300    17
 5  2024     5     3     1731           1725         6     1849           1855        -6 WN         878 N436WN  PHX    LAX         56      370    17
 6  2024    11    27      859            900        -1     1006           1000         6 WN         347 N930WN  PHX    SJC        110      621     9
 7  2024    11    30     2255           2300        -5     2353           2353         0 OO        1754 N774SK  PHX    FLG         33      119    23
 8  2024     8    30     1719           1715         4     2122           2120         2 WN         725 N258WN  PHX    OKC        103      833    17
 9  2024     3     7      953            959        -6     1051           1106       -15 OO        1046 N724EV  PHX    FLG         33      119     9
10  2024     7    10      839            843        -4     1105           1120       -15 OO        1085 N521SY  PHX    GJT         68      438     8
# ℹ 20 more rows
# ℹ 2 more variables: minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a proper date column by combining year, month, and day</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>  flights_fixed <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">flight_date =</span> <span class="fu">make_date</span>(year, month, day)) <span class="sc">|&gt;</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(flight, origin, dest, carrier, year, month, day, flight_date)</span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 221,144 × 8
   flight origin dest  carrier  year month   day flight_date
    &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;date&gt;     
 1   1024 PHX    CLT   AA       2024     1     1 2024-01-01 
 2    643 PHX    EWR   UA       2024     1     1 2024-01-01 
 3    126 PHX    DCA   AA       2024     1     1 2024-01-01 
 4   1155 PHX    DFW   F9       2024     1     1 2024-01-01 
 5   1260 PHX    EWR   NK       2024     1     1 2024-01-01 
 6    376 PHX    MCO   F9       2024     1     1 2024-01-01 
 7    152 PHX    ORD   UA       2024     1     1 2024-01-01 
 8   1379 PHX    ATL   F9       2024     1     1 2024-01-01 
 9     99 PHX    DEN   WN       2024     1     1 2024-01-01 
10    410 PHX    SAT   WN       2024     1     1 2024-01-01 
# ℹ 221,134 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the month name (abbreviated) from the flight_date column for PHX-origin flights</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(origin <span class="sc">==</span> <span class="st">"PHX"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">flight_date =</span> <span class="fu">make_date</span>(year, month, day),</span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">month_name =</span> <span class="fu">month</span>(flight_date, <span class="at">label =</span> <span class="cn">TRUE</span>)</span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(month_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
   month_name     n
   &lt;ord&gt;      &lt;int&gt;
 1 Jan        15378
 2 Feb        14823
 3 Mar        17375
 4 Apr        16531
 5 May        16741
 6 Jun        15326
 7 Jul        15733
 8 Aug        15416
 9 Sep        15081
10 Oct        16978
11 Nov        16827
12 Dec        17342</code></pre>
</div>
</div>
<p>In this example, we work with flight data and use <code>lubridate</code> to construct and extract date information. We start by loading the dataset and then create a new column called <code>flight_date</code> using <code>make_date()</code>, which neatly combines the separate <code>year</code>, <code>month</code>, and <code>day</code> columns into one complete <code>Date</code> object.</p>
<p>This makes it much easier to manipulate or visualize dates moving forward. For example, we can now extract the name of the month using <code>month()</code> with the <code>label = TRUE</code> option to get abbreviated names like “Jan”, “Feb”, etc.</p>
<p>Finally, we count how many flights originated from Phoenix (<code>PHX</code>) in each month. This shows how combining <code>lubridate</code> with tidy tools makes it easy to handle and analyze date-time information.</p>
</section>
<section id="reordering-factors-for-better-visualizations-with-forcats-and-ggplot2" class="level3">
<h3 class="anchored" data-anchor-id="reordering-factors-for-better-visualizations-with-forcats-and-ggplot2">28. Reordering factors for better visualizations with <code>forcats</code> and <code>ggplot2</code></h3>
<section id="example-1" class="level4">
<h4 class="anchored" data-anchor-id="example-1">Example 1</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for flights that originated in PHX</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Count how many flights went to each destination</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder destinations so the bars display in order of frequency</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(origin <span class="sc">==</span> <span class="st">"PHX"</span>) <span class="sc">|&gt;</span></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dest) <span class="sc">|&gt;</span></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dest =</span> forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(dest, n)) <span class="sc">|&gt;</span></span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> dest, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of Flights from PHX to Each Destination"</span>,</span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Destination"</span>, <span class="at">y =</span> <span class="st">"Number of Flights"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="day1_walkthrough_answers_with_notes_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for flights from PHX again</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Group rare destinations with fewer than 1000 flights into an "Other" category</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder factor levels by count and visualize as a bar chart</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(origin <span class="sc">==</span> <span class="st">"PHX"</span>) <span class="sc">|&gt;</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dest_lumped =</span> forcats<span class="sc">::</span><span class="fu">fct_lump_min</span>(</span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>    dest, <span class="at">min =</span> <span class="dv">1000</span>, <span class="at">other_level =</span> <span class="st">"Other"</span>)</span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dest_lumped, <span class="at">name =</span> <span class="st">"n"</span>) <span class="sc">|&gt;</span></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dest_lumped =</span> <span class="fu">fct_reorder</span>(dest_lumped, n)) <span class="sc">|&gt;</span></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> dest_lumped, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Number of Flights from PHX to Each Destination"</span>,</span>
<span id="cb113-16"><a href="#cb113-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Destination"</span>,</span>
<span id="cb113-17"><a href="#cb113-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Flights"</span></span>
<span id="cb113-18"><a href="#cb113-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="day1_walkthrough_answers_with_notes_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>These two plots show the power of <strong>factor reordering</strong> for clean and informative visualizations. In the first, we use <code>fct_reorder()</code> to sort destinations by the number of flights from Phoenix (PHX), making it much easier to spot the busiest routes. <code>coord_flip()</code> gives us a horizontal bar chart, which improves readability when labels are long.</p>
<p>In the second example, we simplify the view by lumping less frequent destinations into an <code>"Other"</code> category using <code>fct_lump_min()</code>. This avoids clutter and helps focus attention on the most significant destinations. Reordering the bars again ensures they appear from least to most frequent for clarity.</p>
</section>
<section id="example-2" class="level4">
<h4 class="anchored" data-anchor-id="example-2">Example 2</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder track genres by the median popularity of their songs</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a violin plot with quantile lines to show distribution</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track_genre =</span> <span class="fu">fct_reorder</span>(track_genre, popularity, <span class="at">.fun =</span> median)) <span class="sc">|&gt;</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> track_genre, <span class="at">y =</span> popularity)) <span class="sc">+</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">draw_quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="day1_walkthrough_answers_with_notes_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>In this second example, we use <code>fct_reorder()</code> again—this time to arrange music genres based on their <strong>median popularity</strong>. This helps us compare distributions across genres in a meaningful order. The violin plot shows how popularity values spread out for each genre, with built-in quantile lines marking the 25th, 50th (median), and 75th percentiles. This gives us a richer view of how popularity varies within and across genres.</p>
</section>
</section>
<section id="interactive-line-plot-of-6-hour-wind-speed-averages" class="level3">
<h3 class="anchored" data-anchor-id="interactive-line-plot-of-6-hour-wind-speed-averages">29. Interactive line plot of 6-hour wind speed averages</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare weather data for PHX and FLG airports during July 2024</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Bin timestamps into 6-hour intervals, create human-readable labels</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>weather_az_binned <span class="ot">&lt;-</span> azflights24<span class="sc">::</span>weather <span class="sc">|&gt;</span> </span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(origin <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"PHX"</span>, <span class="st">"FLG"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">between</span>(time_hour, <span class="fu">ymd</span>(<span class="st">"2024-07-01"</span>), <span class="fu">ymd</span>(<span class="st">"2024-07-31"</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">time_bin_start =</span> <span class="fu">floor_date</span>(time_hour, <span class="at">unit =</span> <span class="st">"6 hours"</span>),</span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">time_bin_end =</span> time_bin_start <span class="sc">+</span> <span class="fu">hours</span>(<span class="dv">6</span>),</span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">str_c</span>(</span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">wday</span>(time_bin_start, <span class="at">label =</span> <span class="cn">TRUE</span>), <span class="st">", "</span>,</span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">month</span>(time_bin_start, <span class="at">label =</span> <span class="cn">TRUE</span>), <span class="st">" "</span>,</span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">day</span>(time_bin_start), <span class="st">" @ "</span>,</span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">strftime</span>(time_bin_start, <span class="st">"%I:%M %p"</span>), <span class="st">"–"</span>,</span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">strftime</span>(time_bin_end, <span class="st">"%I:%M %p"</span>)</span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb115-17"><a href="#cb115-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(origin, time_bin_start, label) <span class="sc">|&gt;</span> </span>
<span id="cb115-18"><a href="#cb115-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_temp =</span> <span class="fu">mean</span>(temp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb115-19"><a href="#cb115-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb115-20"><a href="#cb115-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">tooltip_text =</span> <span class="fu">str_c</span>(</span>
<span id="cb115-21"><a href="#cb115-21" aria-hidden="true" tabindex="-1"></a>      label, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb115-22"><a href="#cb115-22" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Avg Temp: "</span>, <span class="fu">round</span>(avg_temp, <span class="dv">1</span>), <span class="st">"°F"</span></span>
<span id="cb115-23"><a href="#cb115-23" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb115-24"><a href="#cb115-24" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a ggplot line chart with interactive tooltips using plotly</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(weather_az_binned, <span class="fu">aes</span>(<span class="at">x =</span> time_bin_start, <span class="at">y =</span> avg_temp, </span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">text =</span> tooltip_text, <span class="at">group =</span> origin)) <span class="sc">+</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> origin)) <span class="sc">+</span></span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Average Temperature in Phoenix and Flagstaff (6-Hour Intervals) for July 2024"</span>,</span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"July 6-hour Time Bins"</span>,</span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Avg Temperature (F)"</span></span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"PHX"</span> <span class="ot">=</span> <span class="st">"red"</span>, <span class="st">"FLG"</span> <span class="ot">=</span> <span class="st">"blue"</span>))</span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Render the plot as an interactive Plotly chart with custom tooltips</span></span>
<span id="cb116-14"><a href="#cb116-14" aria-hidden="true" tabindex="-1"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-d9835e15ab5b81671e7d" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d9835e15ab5b81671e7d">{"x":{"data":[{"x":[1719817200,1719838800,1719860400,1719882000,1719903600,1719925200,1719946800,1719968400,1719990000,1720011600,1720033200,1720054800,1720076400,1720098000,1720119600,1720141200,1720162800,1720184400,1720206000,1720227600,1720249200,1720270800,1720292400,1720314000,1720335600,1720357200,1720378800,1720400400,1720422000,1720443600,1720465200,1720486800,1720508400,1720530000,1720551600,1720573200,1720594800,1720616400,1720638000,1720659600,1720681200,1720702800,1720724400,1720746000,1720767600,1720789200,1720810800,1720832400,1720854000,1720875600,1720897200,1720918800,1720940400,1720962000,1720983600,1721005200,1721026800,1721048400,1721070000,1721091600,1721113200,1721134800,1721156400,1721178000,1721199600,1721221200,1721242800,1721264400,1721286000,1721307600,1721329200,1721350800,1721372400,1721394000,1721415600,1721437200,1721458800,1721480400,1721502000,1721523600,1721545200,1721566800,1721588400,1721610000,1721631600,1721653200,1721674800,1721696400,1721718000,1721739600,1721761200,1721782800,1721804400,1721826000,1721847600,1721869200,1721890800,1721912400,1721934000,1721955600,1721977200,1721998800,1722020400,1722042000,1722063600,1722085200,1722106800,1722128400,1722150000,1722171600,1722193200,1722214800,1722236400,1722258000,1722279600,1722301200,1722322800,1722344400,1722366000,1722387600,1722409200],"y":[70.799999999999997,60,65.666666666666671,76.666666666666671,69.333333333333329,59.666666666666664,71.833333333333329,83.5,74.166666666666671,62.333333333333336,71.333333333333329,84.666666666666671,73.833333333333329,58.833333333333336,75.333333333333329,90,76,69.5,75.5,86.666666666666671,71.666666666666671,49.166666666666664,71.833333333333329,90,75.833333333333329,51.833333333333336,75.666666666666671,92,77,52.666666666666664,73.166666666666671,90.166666666666671,72.333333333333329,50.666666666666664,73,87.5,73.833333333333329,53.833333333333336,72.333333333333329,89.833333333333329,74.333333333333329,56.833333333333336,74.833333333333329,87.666666666666671,79,61.166666666666664,73.5,80.5,73.299999999999997,63.5,75.666666666666671,87,74,67.833333333333329,77.833333333333329,83.5,66,63,74,79.633333333333326,69.166666666666671,59.5,71,83.333333333333329,73,59.666666666666664,74.166666666666671,82.333333333333329,73.5,61,72.5,84.333333333333329,67.833333333333329,59.833333333333336,70.166666666666671,82,71.666666666666671,63.5,74.833333333333329,84.333333333333329,72.666666666666671,61,69.5,72.900000000000006,63.333333333333336,53.166666666666664,68.833333333333329,76,72.333333333333329,56.166666666666664,68.666666666666671,77.799999999999997,70.5,61.833333333333336,72.166666666666671,76.166666666666671,65.833333333333329,63.166666666666664,74.333333333333329,72.666666666666671,64.166666666666671,58.333333333333336,70.333333333333329,75.333333333333329,66.166666666666671,57.166666666666664,69,81,74,61.666666666666664,69.166666666666671,80.666666666666671,68.833333333333329,57,67.333333333333329,81.5,73.5,58.5,69.666666666666671,83,83],"text":["Mon, Jul 1 @ 12:00 AM–06:00 AM<br />Avg Temp: 70.8°F","Mon, Jul 1 @ 06:00 AM–12:00 PM<br />Avg Temp: 60°F","Mon, Jul 1 @ 12:00 PM–06:00 PM<br />Avg Temp: 65.7°F","Mon, Jul 1 @ 06:00 PM–12:00 AM<br />Avg Temp: 76.7°F","Tue, Jul 2 @ 12:00 AM–06:00 AM<br />Avg Temp: 69.3°F","Tue, Jul 2 @ 06:00 AM–12:00 PM<br />Avg Temp: 59.7°F","Tue, Jul 2 @ 12:00 PM–06:00 PM<br />Avg Temp: 71.8°F","Tue, Jul 2 @ 06:00 PM–12:00 AM<br />Avg Temp: 83.5°F","Wed, Jul 3 @ 12:00 AM–06:00 AM<br />Avg Temp: 74.2°F","Wed, Jul 3 @ 06:00 AM–12:00 PM<br />Avg Temp: 62.3°F","Wed, Jul 3 @ 12:00 PM–06:00 PM<br />Avg Temp: 71.3°F","Wed, Jul 3 @ 06:00 PM–12:00 AM<br />Avg Temp: 84.7°F","Thu, Jul 4 @ 12:00 AM–06:00 AM<br />Avg Temp: 73.8°F","Thu, Jul 4 @ 06:00 AM–12:00 PM<br />Avg Temp: 58.8°F","Thu, Jul 4 @ 12:00 PM–06:00 PM<br />Avg Temp: 75.3°F","Thu, Jul 4 @ 06:00 PM–12:00 AM<br />Avg Temp: 90°F","Fri, Jul 5 @ 12:00 AM–06:00 AM<br />Avg Temp: 76°F","Fri, Jul 5 @ 06:00 AM–12:00 PM<br />Avg Temp: 69.5°F","Fri, Jul 5 @ 12:00 PM–06:00 PM<br />Avg Temp: 75.5°F","Fri, Jul 5 @ 06:00 PM–12:00 AM<br />Avg Temp: 86.7°F","Sat, Jul 6 @ 12:00 AM–06:00 AM<br />Avg Temp: 71.7°F","Sat, Jul 6 @ 06:00 AM–12:00 PM<br />Avg Temp: 49.2°F","Sat, Jul 6 @ 12:00 PM–06:00 PM<br />Avg Temp: 71.8°F","Sat, Jul 6 @ 06:00 PM–12:00 AM<br />Avg Temp: 90°F","Sun, Jul 7 @ 12:00 AM–06:00 AM<br />Avg Temp: 75.8°F","Sun, Jul 7 @ 06:00 AM–12:00 PM<br />Avg Temp: 51.8°F","Sun, Jul 7 @ 12:00 PM–06:00 PM<br />Avg Temp: 75.7°F","Sun, Jul 7 @ 06:00 PM–12:00 AM<br />Avg Temp: 92°F","Mon, Jul 8 @ 12:00 AM–06:00 AM<br />Avg Temp: 77°F","Mon, Jul 8 @ 06:00 AM–12:00 PM<br />Avg Temp: 52.7°F","Mon, Jul 8 @ 12:00 PM–06:00 PM<br />Avg Temp: 73.2°F","Mon, Jul 8 @ 06:00 PM–12:00 AM<br />Avg Temp: 90.2°F","Tue, Jul 9 @ 12:00 AM–06:00 AM<br />Avg Temp: 72.3°F","Tue, Jul 9 @ 06:00 AM–12:00 PM<br />Avg Temp: 50.7°F","Tue, Jul 9 @ 12:00 PM–06:00 PM<br />Avg Temp: 73°F","Tue, Jul 9 @ 06:00 PM–12:00 AM<br />Avg Temp: 87.5°F","Wed, Jul 10 @ 12:00 AM–06:00 AM<br />Avg Temp: 73.8°F","Wed, Jul 10 @ 06:00 AM–12:00 PM<br />Avg Temp: 53.8°F","Wed, Jul 10 @ 12:00 PM–06:00 PM<br />Avg Temp: 72.3°F","Wed, Jul 10 @ 06:00 PM–12:00 AM<br />Avg Temp: 89.8°F","Thu, Jul 11 @ 12:00 AM–06:00 AM<br />Avg Temp: 74.3°F","Thu, Jul 11 @ 06:00 AM–12:00 PM<br />Avg Temp: 56.8°F","Thu, Jul 11 @ 12:00 PM–06:00 PM<br />Avg Temp: 74.8°F","Thu, Jul 11 @ 06:00 PM–12:00 AM<br />Avg Temp: 87.7°F","Fri, Jul 12 @ 12:00 AM–06:00 AM<br />Avg Temp: 79°F","Fri, Jul 12 @ 06:00 AM–12:00 PM<br />Avg Temp: 61.2°F","Fri, Jul 12 @ 12:00 PM–06:00 PM<br />Avg Temp: 73.5°F","Fri, Jul 12 @ 06:00 PM–12:00 AM<br />Avg Temp: 80.5°F","Sat, Jul 13 @ 12:00 AM–06:00 AM<br />Avg Temp: 73.3°F","Sat, Jul 13 @ 06:00 AM–12:00 PM<br />Avg Temp: 63.5°F","Sat, Jul 13 @ 12:00 PM–06:00 PM<br />Avg Temp: 75.7°F","Sat, Jul 13 @ 06:00 PM–12:00 AM<br />Avg Temp: 87°F","Sun, Jul 14 @ 12:00 AM–06:00 AM<br />Avg Temp: 74°F","Sun, Jul 14 @ 06:00 AM–12:00 PM<br />Avg Temp: 67.8°F","Sun, Jul 14 @ 12:00 PM–06:00 PM<br />Avg Temp: 77.8°F","Sun, Jul 14 @ 06:00 PM–12:00 AM<br />Avg Temp: 83.5°F","Mon, Jul 15 @ 12:00 AM–06:00 AM<br />Avg Temp: 66°F","Mon, Jul 15 @ 06:00 AM–12:00 PM<br />Avg Temp: 63°F","Mon, Jul 15 @ 12:00 PM–06:00 PM<br />Avg Temp: 74°F","Mon, Jul 15 @ 06:00 PM–12:00 AM<br />Avg Temp: 79.6°F","Tue, Jul 16 @ 12:00 AM–06:00 AM<br />Avg Temp: 69.2°F","Tue, Jul 16 @ 06:00 AM–12:00 PM<br />Avg Temp: 59.5°F","Tue, Jul 16 @ 12:00 PM–06:00 PM<br />Avg Temp: 71°F","Tue, Jul 16 @ 06:00 PM–12:00 AM<br />Avg Temp: 83.3°F","Wed, Jul 17 @ 12:00 AM–06:00 AM<br />Avg Temp: 73°F","Wed, Jul 17 @ 06:00 AM–12:00 PM<br />Avg Temp: 59.7°F","Wed, Jul 17 @ 12:00 PM–06:00 PM<br />Avg Temp: 74.2°F","Wed, Jul 17 @ 06:00 PM–12:00 AM<br />Avg Temp: 82.3°F","Thu, Jul 18 @ 12:00 AM–06:00 AM<br />Avg Temp: 73.5°F","Thu, Jul 18 @ 06:00 AM–12:00 PM<br />Avg Temp: 61°F","Thu, Jul 18 @ 12:00 PM–06:00 PM<br />Avg Temp: 72.5°F","Thu, Jul 18 @ 06:00 PM–12:00 AM<br />Avg Temp: 84.3°F","Fri, Jul 19 @ 12:00 AM–06:00 AM<br />Avg Temp: 67.8°F","Fri, Jul 19 @ 06:00 AM–12:00 PM<br />Avg Temp: 59.8°F","Fri, Jul 19 @ 12:00 PM–06:00 PM<br />Avg Temp: 70.2°F","Fri, Jul 19 @ 06:00 PM–12:00 AM<br />Avg Temp: 82°F","Sat, Jul 20 @ 12:00 AM–06:00 AM<br />Avg Temp: 71.7°F","Sat, Jul 20 @ 06:00 AM–12:00 PM<br />Avg Temp: 63.5°F","Sat, Jul 20 @ 12:00 PM–06:00 PM<br />Avg Temp: 74.8°F","Sat, Jul 20 @ 06:00 PM–12:00 AM<br />Avg Temp: 84.3°F","Sun, Jul 21 @ 12:00 AM–06:00 AM<br />Avg Temp: 72.7°F","Sun, Jul 21 @ 06:00 AM–12:00 PM<br />Avg Temp: 61°F","Sun, Jul 21 @ 12:00 PM–06:00 PM<br />Avg Temp: 69.5°F","Sun, Jul 21 @ 06:00 PM–12:00 AM<br />Avg Temp: 72.9°F","Mon, Jul 22 @ 12:00 AM–06:00 AM<br />Avg Temp: 63.3°F","Mon, Jul 22 @ 06:00 AM–12:00 PM<br />Avg Temp: 53.2°F","Mon, Jul 22 @ 12:00 PM–06:00 PM<br />Avg Temp: 68.8°F","Mon, Jul 22 @ 06:00 PM–12:00 AM<br />Avg Temp: 76°F","Tue, Jul 23 @ 12:00 AM–06:00 AM<br />Avg Temp: 72.3°F","Tue, Jul 23 @ 06:00 AM–12:00 PM<br />Avg Temp: 56.2°F","Tue, Jul 23 @ 12:00 PM–06:00 PM<br />Avg Temp: 68.7°F","Tue, Jul 23 @ 06:00 PM–12:00 AM<br />Avg Temp: 77.8°F","Wed, Jul 24 @ 12:00 AM–06:00 AM<br />Avg Temp: 70.5°F","Wed, Jul 24 @ 06:00 AM–12:00 PM<br />Avg Temp: 61.8°F","Wed, Jul 24 @ 12:00 PM–06:00 PM<br />Avg Temp: 72.2°F","Wed, Jul 24 @ 06:00 PM–12:00 AM<br />Avg Temp: 76.2°F","Thu, Jul 25 @ 12:00 AM–06:00 AM<br />Avg Temp: 65.8°F","Thu, Jul 25 @ 06:00 AM–12:00 PM<br />Avg Temp: 63.2°F","Thu, Jul 25 @ 12:00 PM–06:00 PM<br />Avg Temp: 74.3°F","Thu, Jul 25 @ 06:00 PM–12:00 AM<br />Avg Temp: 72.7°F","Fri, Jul 26 @ 12:00 AM–06:00 AM<br />Avg Temp: 64.2°F","Fri, Jul 26 @ 06:00 AM–12:00 PM<br />Avg Temp: 58.3°F","Fri, Jul 26 @ 12:00 PM–06:00 PM<br />Avg Temp: 70.3°F","Fri, Jul 26 @ 06:00 PM–12:00 AM<br />Avg Temp: 75.3°F","Sat, Jul 27 @ 12:00 AM–06:00 AM<br />Avg Temp: 66.2°F","Sat, Jul 27 @ 06:00 AM–12:00 PM<br />Avg Temp: 57.2°F","Sat, Jul 27 @ 12:00 PM–06:00 PM<br />Avg Temp: 69°F","Sat, Jul 27 @ 06:00 PM–12:00 AM<br />Avg Temp: 81°F","Sun, Jul 28 @ 12:00 AM–06:00 AM<br />Avg Temp: 74°F","Sun, Jul 28 @ 06:00 AM–12:00 PM<br />Avg Temp: 61.7°F","Sun, Jul 28 @ 12:00 PM–06:00 PM<br />Avg Temp: 69.2°F","Sun, Jul 28 @ 06:00 PM–12:00 AM<br />Avg Temp: 80.7°F","Mon, Jul 29 @ 12:00 AM–06:00 AM<br />Avg Temp: 68.8°F","Mon, Jul 29 @ 06:00 AM–12:00 PM<br />Avg Temp: 57°F","Mon, Jul 29 @ 12:00 PM–06:00 PM<br />Avg Temp: 67.3°F","Mon, Jul 29 @ 06:00 PM–12:00 AM<br />Avg Temp: 81.5°F","Tue, Jul 30 @ 12:00 AM–06:00 AM<br />Avg Temp: 73.5°F","Tue, Jul 30 @ 06:00 AM–12:00 PM<br />Avg Temp: 58.5°F","Tue, Jul 30 @ 12:00 PM–06:00 PM<br />Avg Temp: 69.7°F","Tue, Jul 30 @ 06:00 PM–12:00 AM<br />Avg Temp: 83°F","Wed, Jul 31 @ 12:00 AM–06:00 AM<br />Avg Temp: 83°F"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,255,1)","dash":"solid"},"hoveron":"points","name":"FLG","legendgroup":"FLG","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1719817200,1719838800,1719860400,1719882000,1719903600,1719925200,1719946800,1719968400,1719990000,1720011600,1720033200,1720054800,1720076400,1720098000,1720119600,1720141200,1720162800,1720184400,1720206000,1720227600,1720249200,1720270800,1720292400,1720314000,1720335600,1720357200,1720378800,1720400400,1720422000,1720443600,1720465200,1720486800,1720508400,1720530000,1720551600,1720573200,1720594800,1720616400,1720638000,1720659600,1720681200,1720702800,1720724400,1720746000,1720767600,1720789200,1720810800,1720832400,1720854000,1720875600,1720897200,1720918800,1720940400,1720962000,1720983600,1721005200,1721026800,1721048400,1721070000,1721091600,1721113200,1721134800,1721156400,1721178000,1721199600,1721221200,1721242800,1721264400,1721286000,1721307600,1721329200,1721350800,1721372400,1721394000,1721415600,1721437200,1721458800,1721480400,1721502000,1721523600,1721545200,1721566800,1721588400,1721610000,1721631600,1721653200,1721674800,1721696400,1721718000,1721739600,1721761200,1721782800,1721804400,1721826000,1721847600,1721869200,1721890800,1721912400,1721934000,1721955600,1721977200,1721998800,1722020400,1722042000,1722063600,1722085200,1722106800,1722128400,1722150000,1722171600,1722193200,1722214800,1722236400,1722258000,1722279600,1722301200,1722322800,1722344400,1722366000,1722387600,1722409200],"y":[101.16666666666667,90.666666666666671,91.5,104.16666666666667,101.5,94.5,97.333333333333329,109.33333333333333,107.66666666666667,96.5,97.5,108.83333333333333,106.83333333333333,97.400000000000006,95.333333333333329,108.8,108,98.833333333333329,99.166666666666671,113.66666666666667,111.33333333333333,97.666666666666671,97,110,108.5,97.833333333333329,97,109.66666666666667,109,98.333333333333329,98.166666666666671,114,111,99.666666666666671,97.5,112.83333333333333,110.16666666666667,97.833333333333329,98.666666666666671,111.16666666666667,109.16666666666667,98.666666666666671,98.666666666666671,110.83333333333333,107.33333333333333,95,97.5,112.16666666666667,110.5,99,98.833333333333329,108.66666666666667,107.5,96,93.333333333333329,105.5,99.599999999999994,88.333333333333329,91.666666666666671,104.66666666666667,103.33333333333333,94.333333333333329,94.166666666666671,106,104.83333333333333,95.5,94.5,106.5,104.66666666666667,97.666666666666671,98.166666666666671,107.83333333333333,105.5,94.833333333333329,97.833333333333329,108.83333333333333,107.33333333333333,98.333333333333329,99.5,109.66666666666667,104.5,91.5,95.833333333333329,107,92.166666666666671,88.166666666666671,93,106.16666666666667,106.83333333333333,97.333333333333329,99,110.5,109,98.833333333333329,97.5,110.83333333333333,104.83333333333333,94.5,98,109.5,98,83.5,90.333333333333329,105.66666666666667,105.33333333333333,95.833333333333329,93.666666666666671,107.5,103.5,92,94.833333333333329,108,98.5,89.666666666666671,93.833333333333329,105.5,104.16666666666667,92.666666666666671,93.333333333333329,106,107],"text":["Mon, Jul 1 @ 12:00 AM–06:00 AM<br />Avg Temp: 101.2°F","Mon, Jul 1 @ 06:00 AM–12:00 PM<br />Avg Temp: 90.7°F","Mon, Jul 1 @ 12:00 PM–06:00 PM<br />Avg Temp: 91.5°F","Mon, Jul 1 @ 06:00 PM–12:00 AM<br />Avg Temp: 104.2°F","Tue, Jul 2 @ 12:00 AM–06:00 AM<br />Avg Temp: 101.5°F","Tue, Jul 2 @ 06:00 AM–12:00 PM<br />Avg Temp: 94.5°F","Tue, Jul 2 @ 12:00 PM–06:00 PM<br />Avg Temp: 97.3°F","Tue, Jul 2 @ 06:00 PM–12:00 AM<br />Avg Temp: 109.3°F","Wed, Jul 3 @ 12:00 AM–06:00 AM<br />Avg Temp: 107.7°F","Wed, Jul 3 @ 06:00 AM–12:00 PM<br />Avg Temp: 96.5°F","Wed, Jul 3 @ 12:00 PM–06:00 PM<br />Avg Temp: 97.5°F","Wed, Jul 3 @ 06:00 PM–12:00 AM<br />Avg Temp: 108.8°F","Thu, Jul 4 @ 12:00 AM–06:00 AM<br />Avg Temp: 106.8°F","Thu, Jul 4 @ 06:00 AM–12:00 PM<br />Avg Temp: 97.4°F","Thu, Jul 4 @ 12:00 PM–06:00 PM<br />Avg Temp: 95.3°F","Thu, Jul 4 @ 06:00 PM–12:00 AM<br />Avg Temp: 108.8°F","Fri, Jul 5 @ 12:00 AM–06:00 AM<br />Avg Temp: 108°F","Fri, Jul 5 @ 06:00 AM–12:00 PM<br />Avg Temp: 98.8°F","Fri, Jul 5 @ 12:00 PM–06:00 PM<br />Avg Temp: 99.2°F","Fri, Jul 5 @ 06:00 PM–12:00 AM<br />Avg Temp: 113.7°F","Sat, Jul 6 @ 12:00 AM–06:00 AM<br />Avg Temp: 111.3°F","Sat, Jul 6 @ 06:00 AM–12:00 PM<br />Avg Temp: 97.7°F","Sat, Jul 6 @ 12:00 PM–06:00 PM<br />Avg Temp: 97°F","Sat, Jul 6 @ 06:00 PM–12:00 AM<br />Avg Temp: 110°F","Sun, Jul 7 @ 12:00 AM–06:00 AM<br />Avg Temp: 108.5°F","Sun, Jul 7 @ 06:00 AM–12:00 PM<br />Avg Temp: 97.8°F","Sun, Jul 7 @ 12:00 PM–06:00 PM<br />Avg Temp: 97°F","Sun, Jul 7 @ 06:00 PM–12:00 AM<br />Avg Temp: 109.7°F","Mon, Jul 8 @ 12:00 AM–06:00 AM<br />Avg Temp: 109°F","Mon, Jul 8 @ 06:00 AM–12:00 PM<br />Avg Temp: 98.3°F","Mon, Jul 8 @ 12:00 PM–06:00 PM<br />Avg Temp: 98.2°F","Mon, Jul 8 @ 06:00 PM–12:00 AM<br />Avg Temp: 114°F","Tue, Jul 9 @ 12:00 AM–06:00 AM<br />Avg Temp: 111°F","Tue, Jul 9 @ 06:00 AM–12:00 PM<br />Avg Temp: 99.7°F","Tue, Jul 9 @ 12:00 PM–06:00 PM<br />Avg Temp: 97.5°F","Tue, Jul 9 @ 06:00 PM–12:00 AM<br />Avg Temp: 112.8°F","Wed, Jul 10 @ 12:00 AM–06:00 AM<br />Avg Temp: 110.2°F","Wed, Jul 10 @ 06:00 AM–12:00 PM<br />Avg Temp: 97.8°F","Wed, Jul 10 @ 12:00 PM–06:00 PM<br />Avg Temp: 98.7°F","Wed, Jul 10 @ 06:00 PM–12:00 AM<br />Avg Temp: 111.2°F","Thu, Jul 11 @ 12:00 AM–06:00 AM<br />Avg Temp: 109.2°F","Thu, Jul 11 @ 06:00 AM–12:00 PM<br />Avg Temp: 98.7°F","Thu, Jul 11 @ 12:00 PM–06:00 PM<br />Avg Temp: 98.7°F","Thu, Jul 11 @ 06:00 PM–12:00 AM<br />Avg Temp: 110.8°F","Fri, Jul 12 @ 12:00 AM–06:00 AM<br />Avg Temp: 107.3°F","Fri, Jul 12 @ 06:00 AM–12:00 PM<br />Avg Temp: 95°F","Fri, Jul 12 @ 12:00 PM–06:00 PM<br />Avg Temp: 97.5°F","Fri, Jul 12 @ 06:00 PM–12:00 AM<br />Avg Temp: 112.2°F","Sat, Jul 13 @ 12:00 AM–06:00 AM<br />Avg Temp: 110.5°F","Sat, Jul 13 @ 06:00 AM–12:00 PM<br />Avg Temp: 99°F","Sat, Jul 13 @ 12:00 PM–06:00 PM<br />Avg Temp: 98.8°F","Sat, Jul 13 @ 06:00 PM–12:00 AM<br />Avg Temp: 108.7°F","Sun, Jul 14 @ 12:00 AM–06:00 AM<br />Avg Temp: 107.5°F","Sun, Jul 14 @ 06:00 AM–12:00 PM<br />Avg Temp: 96°F","Sun, Jul 14 @ 12:00 PM–06:00 PM<br />Avg Temp: 93.3°F","Sun, Jul 14 @ 06:00 PM–12:00 AM<br />Avg Temp: 105.5°F","Mon, Jul 15 @ 12:00 AM–06:00 AM<br />Avg Temp: 99.6°F","Mon, Jul 15 @ 06:00 AM–12:00 PM<br />Avg Temp: 88.3°F","Mon, Jul 15 @ 12:00 PM–06:00 PM<br />Avg Temp: 91.7°F","Mon, Jul 15 @ 06:00 PM–12:00 AM<br />Avg Temp: 104.7°F","Tue, Jul 16 @ 12:00 AM–06:00 AM<br />Avg Temp: 103.3°F","Tue, Jul 16 @ 06:00 AM–12:00 PM<br />Avg Temp: 94.3°F","Tue, Jul 16 @ 12:00 PM–06:00 PM<br />Avg Temp: 94.2°F","Tue, Jul 16 @ 06:00 PM–12:00 AM<br />Avg Temp: 106°F","Wed, Jul 17 @ 12:00 AM–06:00 AM<br />Avg Temp: 104.8°F","Wed, Jul 17 @ 06:00 AM–12:00 PM<br />Avg Temp: 95.5°F","Wed, Jul 17 @ 12:00 PM–06:00 PM<br />Avg Temp: 94.5°F","Wed, Jul 17 @ 06:00 PM–12:00 AM<br />Avg Temp: 106.5°F","Thu, Jul 18 @ 12:00 AM–06:00 AM<br />Avg Temp: 104.7°F","Thu, Jul 18 @ 06:00 AM–12:00 PM<br />Avg Temp: 97.7°F","Thu, Jul 18 @ 12:00 PM–06:00 PM<br />Avg Temp: 98.2°F","Thu, Jul 18 @ 06:00 PM–12:00 AM<br />Avg Temp: 107.8°F","Fri, Jul 19 @ 12:00 AM–06:00 AM<br />Avg Temp: 105.5°F","Fri, Jul 19 @ 06:00 AM–12:00 PM<br />Avg Temp: 94.8°F","Fri, Jul 19 @ 12:00 PM–06:00 PM<br />Avg Temp: 97.8°F","Fri, Jul 19 @ 06:00 PM–12:00 AM<br />Avg Temp: 108.8°F","Sat, Jul 20 @ 12:00 AM–06:00 AM<br />Avg Temp: 107.3°F","Sat, Jul 20 @ 06:00 AM–12:00 PM<br />Avg Temp: 98.3°F","Sat, Jul 20 @ 12:00 PM–06:00 PM<br />Avg Temp: 99.5°F","Sat, Jul 20 @ 06:00 PM–12:00 AM<br />Avg Temp: 109.7°F","Sun, Jul 21 @ 12:00 AM–06:00 AM<br />Avg Temp: 104.5°F","Sun, Jul 21 @ 06:00 AM–12:00 PM<br />Avg Temp: 91.5°F","Sun, Jul 21 @ 12:00 PM–06:00 PM<br />Avg Temp: 95.8°F","Sun, Jul 21 @ 06:00 PM–12:00 AM<br />Avg Temp: 107°F","Mon, Jul 22 @ 12:00 AM–06:00 AM<br />Avg Temp: 92.2°F","Mon, Jul 22 @ 06:00 AM–12:00 PM<br />Avg Temp: 88.2°F","Mon, Jul 22 @ 12:00 PM–06:00 PM<br />Avg Temp: 93°F","Mon, Jul 22 @ 06:00 PM–12:00 AM<br />Avg Temp: 106.2°F","Tue, Jul 23 @ 12:00 AM–06:00 AM<br />Avg Temp: 106.8°F","Tue, Jul 23 @ 06:00 AM–12:00 PM<br />Avg Temp: 97.3°F","Tue, Jul 23 @ 12:00 PM–06:00 PM<br />Avg Temp: 99°F","Tue, Jul 23 @ 06:00 PM–12:00 AM<br />Avg Temp: 110.5°F","Wed, Jul 24 @ 12:00 AM–06:00 AM<br />Avg Temp: 109°F","Wed, Jul 24 @ 06:00 AM–12:00 PM<br />Avg Temp: 98.8°F","Wed, Jul 24 @ 12:00 PM–06:00 PM<br />Avg Temp: 97.5°F","Wed, Jul 24 @ 06:00 PM–12:00 AM<br />Avg Temp: 110.8°F","Thu, Jul 25 @ 12:00 AM–06:00 AM<br />Avg Temp: 104.8°F","Thu, Jul 25 @ 06:00 AM–12:00 PM<br />Avg Temp: 94.5°F","Thu, Jul 25 @ 12:00 PM–06:00 PM<br />Avg Temp: 98°F","Thu, Jul 25 @ 06:00 PM–12:00 AM<br />Avg Temp: 109.5°F","Fri, Jul 26 @ 12:00 AM–06:00 AM<br />Avg Temp: 98°F","Fri, Jul 26 @ 06:00 AM–12:00 PM<br />Avg Temp: 83.5°F","Fri, Jul 26 @ 12:00 PM–06:00 PM<br />Avg Temp: 90.3°F","Fri, Jul 26 @ 06:00 PM–12:00 AM<br />Avg Temp: 105.7°F","Sat, Jul 27 @ 12:00 AM–06:00 AM<br />Avg Temp: 105.3°F","Sat, Jul 27 @ 06:00 AM–12:00 PM<br />Avg Temp: 95.8°F","Sat, Jul 27 @ 12:00 PM–06:00 PM<br />Avg Temp: 93.7°F","Sat, Jul 27 @ 06:00 PM–12:00 AM<br />Avg Temp: 107.5°F","Sun, Jul 28 @ 12:00 AM–06:00 AM<br />Avg Temp: 103.5°F","Sun, Jul 28 @ 06:00 AM–12:00 PM<br />Avg Temp: 92°F","Sun, Jul 28 @ 12:00 PM–06:00 PM<br />Avg Temp: 94.8°F","Sun, Jul 28 @ 06:00 PM–12:00 AM<br />Avg Temp: 108°F","Mon, Jul 29 @ 12:00 AM–06:00 AM<br />Avg Temp: 98.5°F","Mon, Jul 29 @ 06:00 AM–12:00 PM<br />Avg Temp: 89.7°F","Mon, Jul 29 @ 12:00 PM–06:00 PM<br />Avg Temp: 93.8°F","Mon, Jul 29 @ 06:00 PM–12:00 AM<br />Avg Temp: 105.5°F","Tue, Jul 30 @ 12:00 AM–06:00 AM<br />Avg Temp: 104.2°F","Tue, Jul 30 @ 06:00 AM–12:00 PM<br />Avg Temp: 92.7°F","Tue, Jul 30 @ 12:00 PM–06:00 PM<br />Avg Temp: 93.3°F","Tue, Jul 30 @ 06:00 PM–12:00 AM<br />Avg Temp: 106°F","Wed, Jul 31 @ 12:00 AM–06:00 AM<br />Avg Temp: 107°F"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(255,0,0,1)","dash":"solid"},"hoveron":"points","name":"PHX","legendgroup":"PHX","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1719817200,1719838800,1719860400,1719882000,1719903600,1719925200,1719946800,1719968400,1719990000,1720011600,1720033200,1720054800,1720076400,1720098000,1720119600,1720141200,1720162800,1720184400,1720206000,1720227600,1720249200,1720270800,1720292400,1720314000,1720335600,1720357200,1720378800,1720400400,1720422000,1720443600,1720465200,1720486800,1720508400,1720530000,1720551600,1720573200,1720594800,1720616400,1720638000,1720659600,1720681200,1720702800,1720724400,1720746000,1720767600,1720789200,1720810800,1720832400,1720854000,1720875600,1720897200,1720918800,1720940400,1720962000,1720983600,1721005200,1721026800,1721048400,1721070000,1721091600,1721113200,1721134800,1721156400,1721178000,1721199600,1721221200,1721242800,1721264400,1721286000,1721307600,1721329200,1721350800,1721372400,1721394000,1721415600,1721437200,1721458800,1721480400,1721502000,1721523600,1721545200,1721566800,1721588400,1721610000,1721631600,1721653200,1721674800,1721696400,1721718000,1721739600,1721761200,1721782800,1721804400,1721826000,1721847600,1721869200,1721890800,1721912400,1721934000,1721955600,1721977200,1721998800,1722020400,1722042000,1722063600,1722085200,1722106800,1722128400,1722150000,1722171600,1722193200,1722214800,1722236400,1722258000,1722279600,1722301200,1722322800,1722344400,1722366000,1722387600,1722409200,1719817200,1719838800,1719860400,1719882000,1719903600,1719925200,1719946800,1719968400,1719990000,1720011600,1720033200,1720054800,1720076400,1720098000,1720119600,1720141200,1720162800,1720184400,1720206000,1720227600,1720249200,1720270800,1720292400,1720314000,1720335600,1720357200,1720378800,1720400400,1720422000,1720443600,1720465200,1720486800,1720508400,1720530000,1720551600,1720573200,1720594800,1720616400,1720638000,1720659600,1720681200,1720702800,1720724400,1720746000,1720767600,1720789200,1720810800,1720832400,1720854000,1720875600,1720897200,1720918800,1720940400,1720962000,1720983600,1721005200,1721026800,1721048400,1721070000,1721091600,1721113200,1721134800,1721156400,1721178000,1721199600,1721221200,1721242800,1721264400,1721286000,1721307600,1721329200,1721350800,1721372400,1721394000,1721415600,1721437200,1721458800,1721480400,1721502000,1721523600,1721545200,1721566800,1721588400,1721610000,1721631600,1721653200,1721674800,1721696400,1721718000,1721739600,1721761200,1721782800,1721804400,1721826000,1721847600,1721869200,1721890800,1721912400,1721934000,1721955600,1721977200,1721998800,1722020400,1722042000,1722063600,1722085200,1722106800,1722128400,1722150000,1722171600,1722193200,1722214800,1722236400,1722258000,1722279600,1722301200,1722322800,1722344400,1722366000,1722387600,1722409200],"y":[70.799999999999997,60,65.666666666666671,76.666666666666671,69.333333333333329,59.666666666666664,71.833333333333329,83.5,74.166666666666671,62.333333333333336,71.333333333333329,84.666666666666671,73.833333333333329,58.833333333333336,75.333333333333329,90,76,69.5,75.5,86.666666666666671,71.666666666666671,49.166666666666664,71.833333333333329,90,75.833333333333329,51.833333333333336,75.666666666666671,92,77,52.666666666666664,73.166666666666671,90.166666666666671,72.333333333333329,50.666666666666664,73,87.5,73.833333333333329,53.833333333333336,72.333333333333329,89.833333333333329,74.333333333333329,56.833333333333336,74.833333333333329,87.666666666666671,79,61.166666666666664,73.5,80.5,73.299999999999997,63.5,75.666666666666671,87,74,67.833333333333329,77.833333333333329,83.5,66,63,74,79.633333333333326,69.166666666666671,59.5,71,83.333333333333329,73,59.666666666666664,74.166666666666671,82.333333333333329,73.5,61,72.5,84.333333333333329,67.833333333333329,59.833333333333336,70.166666666666671,82,71.666666666666671,63.5,74.833333333333329,84.333333333333329,72.666666666666671,61,69.5,72.900000000000006,63.333333333333336,53.166666666666664,68.833333333333329,76,72.333333333333329,56.166666666666664,68.666666666666671,77.799999999999997,70.5,61.833333333333336,72.166666666666671,76.166666666666671,65.833333333333329,63.166666666666664,74.333333333333329,72.666666666666671,64.166666666666671,58.333333333333336,70.333333333333329,75.333333333333329,66.166666666666671,57.166666666666664,69,81,74,61.666666666666664,69.166666666666671,80.666666666666671,68.833333333333329,57,67.333333333333329,81.5,73.5,58.5,69.666666666666671,83,83,101.16666666666667,90.666666666666671,91.5,104.16666666666667,101.5,94.5,97.333333333333329,109.33333333333333,107.66666666666667,96.5,97.5,108.83333333333333,106.83333333333333,97.400000000000006,95.333333333333329,108.8,108,98.833333333333329,99.166666666666671,113.66666666666667,111.33333333333333,97.666666666666671,97,110,108.5,97.833333333333329,97,109.66666666666667,109,98.333333333333329,98.166666666666671,114,111,99.666666666666671,97.5,112.83333333333333,110.16666666666667,97.833333333333329,98.666666666666671,111.16666666666667,109.16666666666667,98.666666666666671,98.666666666666671,110.83333333333333,107.33333333333333,95,97.5,112.16666666666667,110.5,99,98.833333333333329,108.66666666666667,107.5,96,93.333333333333329,105.5,99.599999999999994,88.333333333333329,91.666666666666671,104.66666666666667,103.33333333333333,94.333333333333329,94.166666666666671,106,104.83333333333333,95.5,94.5,106.5,104.66666666666667,97.666666666666671,98.166666666666671,107.83333333333333,105.5,94.833333333333329,97.833333333333329,108.83333333333333,107.33333333333333,98.333333333333329,99.5,109.66666666666667,104.5,91.5,95.833333333333329,107,92.166666666666671,88.166666666666671,93,106.16666666666667,106.83333333333333,97.333333333333329,99,110.5,109,98.833333333333329,97.5,110.83333333333333,104.83333333333333,94.5,98,109.5,98,83.5,90.333333333333329,105.66666666666667,105.33333333333333,95.833333333333329,93.666666666666671,107.5,103.5,92,94.833333333333329,108,98.5,89.666666666666671,93.833333333333329,105.5,104.16666666666667,92.666666666666671,93.333333333333329,106,107],"text":["Mon, Jul 1 @ 12:00 AM–06:00 AM<br />Avg Temp: 70.8°F","Mon, Jul 1 @ 06:00 AM–12:00 PM<br />Avg Temp: 60°F","Mon, Jul 1 @ 12:00 PM–06:00 PM<br />Avg Temp: 65.7°F","Mon, Jul 1 @ 06:00 PM–12:00 AM<br />Avg Temp: 76.7°F","Tue, Jul 2 @ 12:00 AM–06:00 AM<br />Avg Temp: 69.3°F","Tue, Jul 2 @ 06:00 AM–12:00 PM<br />Avg Temp: 59.7°F","Tue, Jul 2 @ 12:00 PM–06:00 PM<br />Avg Temp: 71.8°F","Tue, Jul 2 @ 06:00 PM–12:00 AM<br />Avg Temp: 83.5°F","Wed, Jul 3 @ 12:00 AM–06:00 AM<br />Avg Temp: 74.2°F","Wed, Jul 3 @ 06:00 AM–12:00 PM<br />Avg Temp: 62.3°F","Wed, Jul 3 @ 12:00 PM–06:00 PM<br />Avg Temp: 71.3°F","Wed, Jul 3 @ 06:00 PM–12:00 AM<br />Avg Temp: 84.7°F","Thu, Jul 4 @ 12:00 AM–06:00 AM<br />Avg Temp: 73.8°F","Thu, Jul 4 @ 06:00 AM–12:00 PM<br />Avg Temp: 58.8°F","Thu, Jul 4 @ 12:00 PM–06:00 PM<br />Avg Temp: 75.3°F","Thu, Jul 4 @ 06:00 PM–12:00 AM<br />Avg Temp: 90°F","Fri, Jul 5 @ 12:00 AM–06:00 AM<br />Avg Temp: 76°F","Fri, Jul 5 @ 06:00 AM–12:00 PM<br />Avg Temp: 69.5°F","Fri, Jul 5 @ 12:00 PM–06:00 PM<br />Avg Temp: 75.5°F","Fri, Jul 5 @ 06:00 PM–12:00 AM<br />Avg Temp: 86.7°F","Sat, Jul 6 @ 12:00 AM–06:00 AM<br />Avg Temp: 71.7°F","Sat, Jul 6 @ 06:00 AM–12:00 PM<br />Avg Temp: 49.2°F","Sat, Jul 6 @ 12:00 PM–06:00 PM<br />Avg Temp: 71.8°F","Sat, Jul 6 @ 06:00 PM–12:00 AM<br />Avg Temp: 90°F","Sun, Jul 7 @ 12:00 AM–06:00 AM<br />Avg Temp: 75.8°F","Sun, Jul 7 @ 06:00 AM–12:00 PM<br />Avg Temp: 51.8°F","Sun, Jul 7 @ 12:00 PM–06:00 PM<br />Avg Temp: 75.7°F","Sun, Jul 7 @ 06:00 PM–12:00 AM<br />Avg Temp: 92°F","Mon, Jul 8 @ 12:00 AM–06:00 AM<br />Avg Temp: 77°F","Mon, Jul 8 @ 06:00 AM–12:00 PM<br />Avg Temp: 52.7°F","Mon, Jul 8 @ 12:00 PM–06:00 PM<br />Avg Temp: 73.2°F","Mon, Jul 8 @ 06:00 PM–12:00 AM<br />Avg Temp: 90.2°F","Tue, Jul 9 @ 12:00 AM–06:00 AM<br />Avg Temp: 72.3°F","Tue, Jul 9 @ 06:00 AM–12:00 PM<br />Avg Temp: 50.7°F","Tue, Jul 9 @ 12:00 PM–06:00 PM<br />Avg Temp: 73°F","Tue, Jul 9 @ 06:00 PM–12:00 AM<br />Avg Temp: 87.5°F","Wed, Jul 10 @ 12:00 AM–06:00 AM<br />Avg Temp: 73.8°F","Wed, Jul 10 @ 06:00 AM–12:00 PM<br />Avg Temp: 53.8°F","Wed, Jul 10 @ 12:00 PM–06:00 PM<br />Avg Temp: 72.3°F","Wed, Jul 10 @ 06:00 PM–12:00 AM<br />Avg Temp: 89.8°F","Thu, Jul 11 @ 12:00 AM–06:00 AM<br />Avg Temp: 74.3°F","Thu, Jul 11 @ 06:00 AM–12:00 PM<br />Avg Temp: 56.8°F","Thu, Jul 11 @ 12:00 PM–06:00 PM<br />Avg Temp: 74.8°F","Thu, Jul 11 @ 06:00 PM–12:00 AM<br />Avg Temp: 87.7°F","Fri, Jul 12 @ 12:00 AM–06:00 AM<br />Avg Temp: 79°F","Fri, Jul 12 @ 06:00 AM–12:00 PM<br />Avg Temp: 61.2°F","Fri, Jul 12 @ 12:00 PM–06:00 PM<br />Avg Temp: 73.5°F","Fri, Jul 12 @ 06:00 PM–12:00 AM<br />Avg Temp: 80.5°F","Sat, Jul 13 @ 12:00 AM–06:00 AM<br />Avg Temp: 73.3°F","Sat, Jul 13 @ 06:00 AM–12:00 PM<br />Avg Temp: 63.5°F","Sat, Jul 13 @ 12:00 PM–06:00 PM<br />Avg Temp: 75.7°F","Sat, Jul 13 @ 06:00 PM–12:00 AM<br />Avg Temp: 87°F","Sun, Jul 14 @ 12:00 AM–06:00 AM<br />Avg Temp: 74°F","Sun, Jul 14 @ 06:00 AM–12:00 PM<br />Avg Temp: 67.8°F","Sun, Jul 14 @ 12:00 PM–06:00 PM<br />Avg Temp: 77.8°F","Sun, Jul 14 @ 06:00 PM–12:00 AM<br />Avg Temp: 83.5°F","Mon, Jul 15 @ 12:00 AM–06:00 AM<br />Avg Temp: 66°F","Mon, Jul 15 @ 06:00 AM–12:00 PM<br />Avg Temp: 63°F","Mon, Jul 15 @ 12:00 PM–06:00 PM<br />Avg Temp: 74°F","Mon, Jul 15 @ 06:00 PM–12:00 AM<br />Avg Temp: 79.6°F","Tue, Jul 16 @ 12:00 AM–06:00 AM<br />Avg Temp: 69.2°F","Tue, Jul 16 @ 06:00 AM–12:00 PM<br />Avg Temp: 59.5°F","Tue, Jul 16 @ 12:00 PM–06:00 PM<br />Avg Temp: 71°F","Tue, Jul 16 @ 06:00 PM–12:00 AM<br />Avg Temp: 83.3°F","Wed, Jul 17 @ 12:00 AM–06:00 AM<br />Avg Temp: 73°F","Wed, Jul 17 @ 06:00 AM–12:00 PM<br />Avg Temp: 59.7°F","Wed, Jul 17 @ 12:00 PM–06:00 PM<br />Avg Temp: 74.2°F","Wed, Jul 17 @ 06:00 PM–12:00 AM<br />Avg Temp: 82.3°F","Thu, Jul 18 @ 12:00 AM–06:00 AM<br />Avg Temp: 73.5°F","Thu, Jul 18 @ 06:00 AM–12:00 PM<br />Avg Temp: 61°F","Thu, Jul 18 @ 12:00 PM–06:00 PM<br />Avg Temp: 72.5°F","Thu, Jul 18 @ 06:00 PM–12:00 AM<br />Avg Temp: 84.3°F","Fri, Jul 19 @ 12:00 AM–06:00 AM<br />Avg Temp: 67.8°F","Fri, Jul 19 @ 06:00 AM–12:00 PM<br />Avg Temp: 59.8°F","Fri, Jul 19 @ 12:00 PM–06:00 PM<br />Avg Temp: 70.2°F","Fri, Jul 19 @ 06:00 PM–12:00 AM<br />Avg Temp: 82°F","Sat, Jul 20 @ 12:00 AM–06:00 AM<br />Avg Temp: 71.7°F","Sat, Jul 20 @ 06:00 AM–12:00 PM<br />Avg Temp: 63.5°F","Sat, Jul 20 @ 12:00 PM–06:00 PM<br />Avg Temp: 74.8°F","Sat, Jul 20 @ 06:00 PM–12:00 AM<br />Avg Temp: 84.3°F","Sun, Jul 21 @ 12:00 AM–06:00 AM<br />Avg Temp: 72.7°F","Sun, Jul 21 @ 06:00 AM–12:00 PM<br />Avg Temp: 61°F","Sun, Jul 21 @ 12:00 PM–06:00 PM<br />Avg Temp: 69.5°F","Sun, Jul 21 @ 06:00 PM–12:00 AM<br />Avg Temp: 72.9°F","Mon, Jul 22 @ 12:00 AM–06:00 AM<br />Avg Temp: 63.3°F","Mon, Jul 22 @ 06:00 AM–12:00 PM<br />Avg Temp: 53.2°F","Mon, Jul 22 @ 12:00 PM–06:00 PM<br />Avg Temp: 68.8°F","Mon, Jul 22 @ 06:00 PM–12:00 AM<br />Avg Temp: 76°F","Tue, Jul 23 @ 12:00 AM–06:00 AM<br />Avg Temp: 72.3°F","Tue, Jul 23 @ 06:00 AM–12:00 PM<br />Avg Temp: 56.2°F","Tue, Jul 23 @ 12:00 PM–06:00 PM<br />Avg Temp: 68.7°F","Tue, Jul 23 @ 06:00 PM–12:00 AM<br />Avg Temp: 77.8°F","Wed, Jul 24 @ 12:00 AM–06:00 AM<br />Avg Temp: 70.5°F","Wed, Jul 24 @ 06:00 AM–12:00 PM<br />Avg Temp: 61.8°F","Wed, Jul 24 @ 12:00 PM–06:00 PM<br />Avg Temp: 72.2°F","Wed, Jul 24 @ 06:00 PM–12:00 AM<br />Avg Temp: 76.2°F","Thu, Jul 25 @ 12:00 AM–06:00 AM<br />Avg Temp: 65.8°F","Thu, Jul 25 @ 06:00 AM–12:00 PM<br />Avg Temp: 63.2°F","Thu, Jul 25 @ 12:00 PM–06:00 PM<br />Avg Temp: 74.3°F","Thu, Jul 25 @ 06:00 PM–12:00 AM<br />Avg Temp: 72.7°F","Fri, Jul 26 @ 12:00 AM–06:00 AM<br />Avg Temp: 64.2°F","Fri, Jul 26 @ 06:00 AM–12:00 PM<br />Avg Temp: 58.3°F","Fri, Jul 26 @ 12:00 PM–06:00 PM<br />Avg Temp: 70.3°F","Fri, Jul 26 @ 06:00 PM–12:00 AM<br />Avg Temp: 75.3°F","Sat, Jul 27 @ 12:00 AM–06:00 AM<br />Avg Temp: 66.2°F","Sat, Jul 27 @ 06:00 AM–12:00 PM<br />Avg Temp: 57.2°F","Sat, Jul 27 @ 12:00 PM–06:00 PM<br />Avg Temp: 69°F","Sat, Jul 27 @ 06:00 PM–12:00 AM<br />Avg Temp: 81°F","Sun, Jul 28 @ 12:00 AM–06:00 AM<br />Avg Temp: 74°F","Sun, Jul 28 @ 06:00 AM–12:00 PM<br />Avg Temp: 61.7°F","Sun, Jul 28 @ 12:00 PM–06:00 PM<br />Avg Temp: 69.2°F","Sun, Jul 28 @ 06:00 PM–12:00 AM<br />Avg Temp: 80.7°F","Mon, Jul 29 @ 12:00 AM–06:00 AM<br />Avg Temp: 68.8°F","Mon, Jul 29 @ 06:00 AM–12:00 PM<br />Avg Temp: 57°F","Mon, Jul 29 @ 12:00 PM–06:00 PM<br />Avg Temp: 67.3°F","Mon, Jul 29 @ 06:00 PM–12:00 AM<br />Avg Temp: 81.5°F","Tue, Jul 30 @ 12:00 AM–06:00 AM<br />Avg Temp: 73.5°F","Tue, Jul 30 @ 06:00 AM–12:00 PM<br />Avg Temp: 58.5°F","Tue, Jul 30 @ 12:00 PM–06:00 PM<br />Avg Temp: 69.7°F","Tue, Jul 30 @ 06:00 PM–12:00 AM<br />Avg Temp: 83°F","Wed, Jul 31 @ 12:00 AM–06:00 AM<br />Avg Temp: 83°F","Mon, Jul 1 @ 12:00 AM–06:00 AM<br />Avg Temp: 101.2°F","Mon, Jul 1 @ 06:00 AM–12:00 PM<br />Avg Temp: 90.7°F","Mon, Jul 1 @ 12:00 PM–06:00 PM<br />Avg Temp: 91.5°F","Mon, Jul 1 @ 06:00 PM–12:00 AM<br />Avg Temp: 104.2°F","Tue, Jul 2 @ 12:00 AM–06:00 AM<br />Avg Temp: 101.5°F","Tue, Jul 2 @ 06:00 AM–12:00 PM<br />Avg Temp: 94.5°F","Tue, Jul 2 @ 12:00 PM–06:00 PM<br />Avg Temp: 97.3°F","Tue, Jul 2 @ 06:00 PM–12:00 AM<br />Avg Temp: 109.3°F","Wed, Jul 3 @ 12:00 AM–06:00 AM<br />Avg Temp: 107.7°F","Wed, Jul 3 @ 06:00 AM–12:00 PM<br />Avg Temp: 96.5°F","Wed, Jul 3 @ 12:00 PM–06:00 PM<br />Avg Temp: 97.5°F","Wed, Jul 3 @ 06:00 PM–12:00 AM<br />Avg Temp: 108.8°F","Thu, Jul 4 @ 12:00 AM–06:00 AM<br />Avg Temp: 106.8°F","Thu, Jul 4 @ 06:00 AM–12:00 PM<br />Avg Temp: 97.4°F","Thu, Jul 4 @ 12:00 PM–06:00 PM<br />Avg Temp: 95.3°F","Thu, Jul 4 @ 06:00 PM–12:00 AM<br />Avg Temp: 108.8°F","Fri, Jul 5 @ 12:00 AM–06:00 AM<br />Avg Temp: 108°F","Fri, Jul 5 @ 06:00 AM–12:00 PM<br />Avg Temp: 98.8°F","Fri, Jul 5 @ 12:00 PM–06:00 PM<br />Avg Temp: 99.2°F","Fri, Jul 5 @ 06:00 PM–12:00 AM<br />Avg Temp: 113.7°F","Sat, Jul 6 @ 12:00 AM–06:00 AM<br />Avg Temp: 111.3°F","Sat, Jul 6 @ 06:00 AM–12:00 PM<br />Avg Temp: 97.7°F","Sat, Jul 6 @ 12:00 PM–06:00 PM<br />Avg Temp: 97°F","Sat, Jul 6 @ 06:00 PM–12:00 AM<br />Avg Temp: 110°F","Sun, Jul 7 @ 12:00 AM–06:00 AM<br />Avg Temp: 108.5°F","Sun, Jul 7 @ 06:00 AM–12:00 PM<br />Avg Temp: 97.8°F","Sun, Jul 7 @ 12:00 PM–06:00 PM<br />Avg Temp: 97°F","Sun, Jul 7 @ 06:00 PM–12:00 AM<br />Avg Temp: 109.7°F","Mon, Jul 8 @ 12:00 AM–06:00 AM<br />Avg Temp: 109°F","Mon, Jul 8 @ 06:00 AM–12:00 PM<br />Avg Temp: 98.3°F","Mon, Jul 8 @ 12:00 PM–06:00 PM<br />Avg Temp: 98.2°F","Mon, Jul 8 @ 06:00 PM–12:00 AM<br />Avg Temp: 114°F","Tue, Jul 9 @ 12:00 AM–06:00 AM<br />Avg Temp: 111°F","Tue, Jul 9 @ 06:00 AM–12:00 PM<br />Avg Temp: 99.7°F","Tue, Jul 9 @ 12:00 PM–06:00 PM<br />Avg Temp: 97.5°F","Tue, Jul 9 @ 06:00 PM–12:00 AM<br />Avg Temp: 112.8°F","Wed, Jul 10 @ 12:00 AM–06:00 AM<br />Avg Temp: 110.2°F","Wed, Jul 10 @ 06:00 AM–12:00 PM<br />Avg Temp: 97.8°F","Wed, Jul 10 @ 12:00 PM–06:00 PM<br />Avg Temp: 98.7°F","Wed, Jul 10 @ 06:00 PM–12:00 AM<br />Avg Temp: 111.2°F","Thu, Jul 11 @ 12:00 AM–06:00 AM<br />Avg Temp: 109.2°F","Thu, Jul 11 @ 06:00 AM–12:00 PM<br />Avg Temp: 98.7°F","Thu, Jul 11 @ 12:00 PM–06:00 PM<br />Avg Temp: 98.7°F","Thu, Jul 11 @ 06:00 PM–12:00 AM<br />Avg Temp: 110.8°F","Fri, Jul 12 @ 12:00 AM–06:00 AM<br />Avg Temp: 107.3°F","Fri, Jul 12 @ 06:00 AM–12:00 PM<br />Avg Temp: 95°F","Fri, Jul 12 @ 12:00 PM–06:00 PM<br />Avg Temp: 97.5°F","Fri, Jul 12 @ 06:00 PM–12:00 AM<br />Avg Temp: 112.2°F","Sat, Jul 13 @ 12:00 AM–06:00 AM<br />Avg Temp: 110.5°F","Sat, Jul 13 @ 06:00 AM–12:00 PM<br />Avg Temp: 99°F","Sat, Jul 13 @ 12:00 PM–06:00 PM<br />Avg Temp: 98.8°F","Sat, Jul 13 @ 06:00 PM–12:00 AM<br />Avg Temp: 108.7°F","Sun, Jul 14 @ 12:00 AM–06:00 AM<br />Avg Temp: 107.5°F","Sun, Jul 14 @ 06:00 AM–12:00 PM<br />Avg Temp: 96°F","Sun, Jul 14 @ 12:00 PM–06:00 PM<br />Avg Temp: 93.3°F","Sun, Jul 14 @ 06:00 PM–12:00 AM<br />Avg Temp: 105.5°F","Mon, Jul 15 @ 12:00 AM–06:00 AM<br />Avg Temp: 99.6°F","Mon, Jul 15 @ 06:00 AM–12:00 PM<br />Avg Temp: 88.3°F","Mon, Jul 15 @ 12:00 PM–06:00 PM<br />Avg Temp: 91.7°F","Mon, Jul 15 @ 06:00 PM–12:00 AM<br />Avg Temp: 104.7°F","Tue, Jul 16 @ 12:00 AM–06:00 AM<br />Avg Temp: 103.3°F","Tue, Jul 16 @ 06:00 AM–12:00 PM<br />Avg Temp: 94.3°F","Tue, Jul 16 @ 12:00 PM–06:00 PM<br />Avg Temp: 94.2°F","Tue, Jul 16 @ 06:00 PM–12:00 AM<br />Avg Temp: 106°F","Wed, Jul 17 @ 12:00 AM–06:00 AM<br />Avg Temp: 104.8°F","Wed, Jul 17 @ 06:00 AM–12:00 PM<br />Avg Temp: 95.5°F","Wed, Jul 17 @ 12:00 PM–06:00 PM<br />Avg Temp: 94.5°F","Wed, Jul 17 @ 06:00 PM–12:00 AM<br />Avg Temp: 106.5°F","Thu, Jul 18 @ 12:00 AM–06:00 AM<br />Avg Temp: 104.7°F","Thu, Jul 18 @ 06:00 AM–12:00 PM<br />Avg Temp: 97.7°F","Thu, Jul 18 @ 12:00 PM–06:00 PM<br />Avg Temp: 98.2°F","Thu, Jul 18 @ 06:00 PM–12:00 AM<br />Avg Temp: 107.8°F","Fri, Jul 19 @ 12:00 AM–06:00 AM<br />Avg Temp: 105.5°F","Fri, Jul 19 @ 06:00 AM–12:00 PM<br />Avg Temp: 94.8°F","Fri, Jul 19 @ 12:00 PM–06:00 PM<br />Avg Temp: 97.8°F","Fri, Jul 19 @ 06:00 PM–12:00 AM<br />Avg Temp: 108.8°F","Sat, Jul 20 @ 12:00 AM–06:00 AM<br />Avg Temp: 107.3°F","Sat, Jul 20 @ 06:00 AM–12:00 PM<br />Avg Temp: 98.3°F","Sat, Jul 20 @ 12:00 PM–06:00 PM<br />Avg Temp: 99.5°F","Sat, Jul 20 @ 06:00 PM–12:00 AM<br />Avg Temp: 109.7°F","Sun, Jul 21 @ 12:00 AM–06:00 AM<br />Avg Temp: 104.5°F","Sun, Jul 21 @ 06:00 AM–12:00 PM<br />Avg Temp: 91.5°F","Sun, Jul 21 @ 12:00 PM–06:00 PM<br />Avg Temp: 95.8°F","Sun, Jul 21 @ 06:00 PM–12:00 AM<br />Avg Temp: 107°F","Mon, Jul 22 @ 12:00 AM–06:00 AM<br />Avg Temp: 92.2°F","Mon, Jul 22 @ 06:00 AM–12:00 PM<br />Avg Temp: 88.2°F","Mon, Jul 22 @ 12:00 PM–06:00 PM<br />Avg Temp: 93°F","Mon, Jul 22 @ 06:00 PM–12:00 AM<br />Avg Temp: 106.2°F","Tue, Jul 23 @ 12:00 AM–06:00 AM<br />Avg Temp: 106.8°F","Tue, Jul 23 @ 06:00 AM–12:00 PM<br />Avg Temp: 97.3°F","Tue, Jul 23 @ 12:00 PM–06:00 PM<br />Avg Temp: 99°F","Tue, Jul 23 @ 06:00 PM–12:00 AM<br />Avg Temp: 110.5°F","Wed, Jul 24 @ 12:00 AM–06:00 AM<br />Avg Temp: 109°F","Wed, Jul 24 @ 06:00 AM–12:00 PM<br />Avg Temp: 98.8°F","Wed, Jul 24 @ 12:00 PM–06:00 PM<br />Avg Temp: 97.5°F","Wed, Jul 24 @ 06:00 PM–12:00 AM<br />Avg Temp: 110.8°F","Thu, Jul 25 @ 12:00 AM–06:00 AM<br />Avg Temp: 104.8°F","Thu, Jul 25 @ 06:00 AM–12:00 PM<br />Avg Temp: 94.5°F","Thu, Jul 25 @ 12:00 PM–06:00 PM<br />Avg Temp: 98°F","Thu, Jul 25 @ 06:00 PM–12:00 AM<br />Avg Temp: 109.5°F","Fri, Jul 26 @ 12:00 AM–06:00 AM<br />Avg Temp: 98°F","Fri, Jul 26 @ 06:00 AM–12:00 PM<br />Avg Temp: 83.5°F","Fri, Jul 26 @ 12:00 PM–06:00 PM<br />Avg Temp: 90.3°F","Fri, Jul 26 @ 06:00 PM–12:00 AM<br />Avg Temp: 105.7°F","Sat, Jul 27 @ 12:00 AM–06:00 AM<br />Avg Temp: 105.3°F","Sat, Jul 27 @ 06:00 AM–12:00 PM<br />Avg Temp: 95.8°F","Sat, Jul 27 @ 12:00 PM–06:00 PM<br />Avg Temp: 93.7°F","Sat, Jul 27 @ 06:00 PM–12:00 AM<br />Avg Temp: 107.5°F","Sun, Jul 28 @ 12:00 AM–06:00 AM<br />Avg Temp: 103.5°F","Sun, Jul 28 @ 06:00 AM–12:00 PM<br />Avg Temp: 92°F","Sun, Jul 28 @ 12:00 PM–06:00 PM<br />Avg Temp: 94.8°F","Sun, Jul 28 @ 06:00 PM–12:00 AM<br />Avg Temp: 108°F","Mon, Jul 29 @ 12:00 AM–06:00 AM<br />Avg Temp: 98.5°F","Mon, Jul 29 @ 06:00 AM–12:00 PM<br />Avg Temp: 89.7°F","Mon, Jul 29 @ 12:00 PM–06:00 PM<br />Avg Temp: 93.8°F","Mon, Jul 29 @ 06:00 PM–12:00 AM<br />Avg Temp: 105.5°F","Tue, Jul 30 @ 12:00 AM–06:00 AM<br />Avg Temp: 104.2°F","Tue, Jul 30 @ 06:00 AM–12:00 PM<br />Avg Temp: 92.7°F","Tue, Jul 30 @ 12:00 PM–06:00 PM<br />Avg Temp: 93.3°F","Tue, Jul 30 @ 06:00 PM–12:00 AM<br />Avg Temp: 106°F","Wed, Jul 31 @ 12:00 AM–06:00 AM<br />Avg Temp: 107°F"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":43.105022831050235},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Average Temperature in Phoenix and Flagstaff (6-Hour Intervals) for July 2024","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1719687600,1722538800],"tickmode":"array","ticktext":["Jul 01","Jul 08","Jul 15","Jul 22","Jul 29"],"tickvals":[1719817200,1720422000,1721026800,1721631600,1722236400],"categoryorder":"array","categoryarray":["Jul 01","Jul 08","Jul 15","Jul 22","Jul 29"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"July 6-hour Time Bins","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[45.924999999999997,117.24166666666667],"tickmode":"array","ticktext":["60","80","100"],"tickvals":[60,80,100],"categoryorder":"array","categoryarray":["60","80","100"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Avg Temperature (F)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"origin","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"143e1132bb454":{"x":{},"y":{},"text":{},"colour":{},"type":"scatter"},"143e11a4c00a1":{"x":{},"y":{},"text":{}}},"cur_data":"143e1132bb454","visdat":{"143e1132bb454":["function (y) ","x"],"143e11a4c00a1":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>This example shows how to turn a time-series weather dataset into an <strong>interactive line plot</strong> using <code>ggplot2</code> and <code>plotly</code>. We start by filtering weather data for Phoenix (PHX) and Flagstaff (FLG) in July 2024, then group the data into 6-hour intervals using <code>floor_date()</code> and <code>mutate()</code> to create readable labels for each bin.</p>
<p>We compute the average temperature per time bin and origin, then build a tooltip for each point that includes the label and rounded average temperature.</p>
<p>In the plot, we draw separate lines for each airport using <code>geom_line()</code> and color them red and blue for PHX and FLG. <code>ggplotly()</code> makes the chart interactive, allowing users to hover over points and see detailed tooltips. This kind of visualization is great for exploring temporal patterns in weather or sensor data.</p>
</section>
<section id="summarizing-weather-app-preferences-by-region" class="level3">
<h3 class="anchored" data-anchor-id="summarizing-weather-app-preferences-by-region">30. Summarizing weather app preferences by region</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load survey data on weather app preferences from the fivethirtyeight package</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"weather_check"</span>, <span class="at">package =</span> <span class="st">"fivethirtyeight"</span>)</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare the data by filtering out missing values</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Lump less common weather sources into "Other"</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder regions based on frequency of responses</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>grouped_responses <span class="ot">&lt;-</span> weather_check <span class="sc">|&gt;</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(weather_source), <span class="sc">!</span><span class="fu">is.na</span>(region)) <span class="sc">|&gt;</span></span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">weather_source =</span> <span class="fu">fct_lump</span>(weather_source, <span class="at">n =</span> <span class="dv">4</span>),</span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> <span class="fu">fct_infreq</span>(region)</span>
<span id="cb117-12"><a href="#cb117-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb117-13"><a href="#cb117-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(region, weather_source) <span class="sc">|&gt;</span></span>
<span id="cb117-14"><a href="#cb117-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(region, <span class="fu">desc</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a side-by-side bar plot showing weather source preferences by region</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(grouped_responses, <span class="fu">aes</span>(<span class="at">x =</span> region, <span class="at">y =</span> n, <span class="at">fill =</span> weather_source)) <span class="sc">+</span></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Weather App Preferences by Region"</span>,</span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Weather Source"</span>,</span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Count"</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="day1_walkthrough_answers_with_notes_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This example explores how different U.S. regions prefer different weather sources. We start by loading the <code>weather_check</code> dataset and cleaning it by removing rows with missing values in either <code>weather_source</code> or <code>region</code>.</p>
<p>We simplify the visualization by using <code>fct_lump()</code> to group less common weather apps into an “Other” category and reorder regions by response count with <code>fct_infreq()</code>. After counting responses by <code>region</code> and <code>weather_source</code>, we use <code>geom_col(position = "dodge")</code> to create a <strong>side-by-side bar plot</strong>, which lets us compare app usage across regions.</p>
<p>Flipping the coordinates makes the plot easier to read, especially when region names are long. This is a great way to combine factor handling, cleaning, and visualization to explore survey data.</p>
<hr>
</section>
<section id="session-3-review-questions" class="level3">
<h3 class="anchored" data-anchor-id="session-3-review-questions">Session 3 Review Questions</h3>
<p><strong><code>(3.1)</code></strong> Why does the regex pattern <code>"\\(.*?\\)"</code> used in <code>str_remove_all()</code> work better than <code>"\\(.*\\)"</code> when cleaning track names?</p>
<p>A. The <code>.*?</code> forces R to skip anything in parentheses rather than match it.<br>
B. <code>.*?</code> is a greedy matcher that ensures the longest match possible is removed.<br>
C. <code>"\\(.*?\\)"</code> only works when the parentheses are numeric, like <code>(1)</code> or <code>(2)</code>. D. <code>.*?</code> makes the match non-greedy, stopping at the first closing parenthesis.</p>
<hr>
<p><strong><code>(3.2)</code></strong> What does this code return?</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="fu">separate_rows</span>(artists, <span class="at">sep =</span> <span class="st">";"</span>) <span class="sc">|&gt;</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="fu">distinct</span>(artists, track_genre) <span class="sc">|&gt;</span></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(artists) <span class="sc">|&gt;</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(<span class="fu">n_distinct</span>(track_genre) <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A. It returns artists who appear in more than one track.<br>
B. It returns tracks that are associated with more than one genre.<br>
C. It returns genres that feature more than one artist.<br>
D. It returns artists that appear in more than one genre.</p>
<hr>
<p><strong><code>(3.3)</code></strong> What will the following code produce?</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">track_name_clean =</span> <span class="fu">str_remove_all</span>(track_name, <span class="st">"</span><span class="sc">\\</span><span class="st">(.*?</span><span class="sc">\\</span><span class="st">)"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(track_name, track_name_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A. A data frame with only tracks that contain parentheses in their names<br>
B. A new column with all track names replaced by text inside parentheses<br>
C. A new column where all content inside parentheses has been removed from track names<br>
D. A subset of songs where all punctuation has been stripped from the track name</p>
<hr>
<p><strong><code>(3.4)</code></strong> Which of the following best explains the use of <code>fct_lump(track_genre, n = 3)</code>?</p>
<p>A. It removes the three most frequent levels in the <code>track_genre</code> factor.<br>
B. It converts the <code>track_genre</code> variable into numeric rank based on popularity.<br>
C. It keeps only the top three most common genres and lumps the rest into “Other”.<br>
D. It randomly selects three genres to collapse into one category.</p>
<hr>
<p><strong><code>(3.5)</code></strong> What does this <code>ggplot()</code> show?</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">track_genre =</span> <span class="fu">fct_reorder</span>(track_genre, popularity, <span class="at">.fun =</span> max)) <span class="sc">|&gt;</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> track_genre, <span class="at">y =</span> popularity)) <span class="sc">+</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_violin</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A. A violin plot sorted alphabetically by genre name<br>
B. A violin plot of genre popularity, with genres ordered by max popularity<br>
C. A violin plot of max track length across genres<br>
D. A histogram showing popularity grouped by genre</p>
<hr>
</section>
<section id="session-3-review-question-answers" class="level3">
<h3 class="anchored" data-anchor-id="session-3-review-question-answers">Session 3 Review Question Answers</h3>
<p><strong><code>(3.1)</code></strong> Why does the regex pattern <code>"\\(.*?\\)"</code> used in <code>str_remove_all()</code> work better than <code>"\\(.*\\)"</code> when cleaning track names?</p>
<p><strong>Correct Answer:</strong><br>
D. <code>.*?</code> makes the match non-greedy, stopping at the first closing parenthesis.</p>
<p><strong>Explanation:</strong><br>
The <code>.*?</code> part tells the regex engine to match as little as possible. This avoids removing everything between the first opening and the last closing parenthesis, which <code>.*</code> (greedy) would do.</p>
<hr>
<p><strong><code>(3.2)</code></strong> What does this code return?</p>
<p><strong>Correct Answer:</strong><br>
D. It returns artists that appear in more than one genre.</p>
<p><strong>Explanation:</strong><br>
The code first separates artists into rows, then finds unique artist–genre pairs, and filters for those where an artist is associated with more than one genre.</p>
<hr>
<p><strong><code>(3.3)</code></strong> What will the following code produce?</p>
<p><strong>Correct Answer:</strong><br>
C. A new column where all content inside parentheses has been removed from track names</p>
<p><strong>Explanation:</strong><br>
The regex removes text (and parentheses themselves) like <code>(Remix)</code> or <code>(feat. Someone)</code> using a non-greedy match. The cleaned result is stored in a new column.</p>
<hr>
<p><strong><code>(3.4)</code></strong> Which of the following best explains the use of <code>fct_lump(track_genre, n = 3)</code>?</p>
<p><strong>Correct Answer:</strong><br>
C. It keeps only the top three most common genres and lumps the rest into “Other”.</p>
<p><strong>Explanation:</strong><br>
<code>fct_lump()</code> simplifies a categorical variable by collapsing less frequent levels into one “Other” category, keeping only the top <code>n</code> most common.</p>
<hr>
<p><strong><code>(3.5)</code></strong> What does this <code>ggplot()</code> show?</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>spotify <span class="sc">|&gt;</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">track_genre =</span> <span class="fu">fct_reorder</span>(track_genre, popularity, <span class="at">.fun =</span> max)) <span class="sc">|&gt;</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> track_genre, <span class="at">y =</span> popularity)) <span class="sc">+</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_violin</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Correct Answer:</strong><br>
B. A violin plot of genre popularity, with genres ordered by max popularity</p>
<p><strong>Explanation:</strong><br>
<code>fct_reorder()</code> reorders the factor levels by maximum popularity. The violin plot then visualizes the distribution of popularity for each genre in this new order.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>